'use strict';const _0x4ddfe5=_0x43dd;(function(_0x3a5cb4,_0x3a4e5d){const _0x3c3168=_0x43dd,_0x2fb81d=_0x3a5cb4();while(!![]){try{const _0x5e64a0=parseInt(_0x3c3168(0x1f1))/0x1*(parseInt(_0x3c3168(0x1e5))/0x2)+-parseInt(_0x3c3168(0x221))/0x3+parseInt(_0x3c3168(0x1e1))/0x4+parseInt(_0x3c3168(0x1ed))/0x5+parseInt(_0x3c3168(0x203))/0x6*(-parseInt(_0x3c3168(0x1f7))/0x7)+-parseInt(_0x3c3168(0x206))/0x8*(-parseInt(_0x3c3168(0x220))/0x9)+parseInt(_0x3c3168(0x1dc))/0xa*(-parseInt(_0x3c3168(0x1f5))/0xb);if(_0x5e64a0===_0x3a4e5d)break;else _0x2fb81d['push'](_0x2fb81d['shift']());}catch(_0x30f142){_0x2fb81d['push'](_0x2fb81d['shift']());}}}(_0x7af7,0x5bec5));function _0x43dd(_0x4e9c09,_0x3ac5f7){const _0x7af737=_0x7af7();return _0x43dd=function(_0x43dddd,_0x1c00ec){_0x43dddd=_0x43dddd-0x1dc;let _0x591f4e=_0x7af737[_0x43dddd];return _0x591f4e;},_0x43dd(_0x4e9c09,_0x3ac5f7);}function _0x7af7(){const _0x15c456=['extractToken','headers','validateToken','getOwnPropertyDescriptor','createTokenFromFingerprint','checkTokenAuth','design:paramtypes','BAD_REQUEST','switchToHttp','role','83046qtvkjy','Injectable','split','5651832vxPPsz','../../modules/redisCache/redisCache.service','decrypt','exit','object','get','canActivate','HttpException','JwtAuthGuard','@nestjs/common','handleRequest','ModuleRef','metadata','AuthService','getInfo','fingerprint','HttpStatus','redisCacheService','log','getRandomItemFromArray','jsonwebtoken','authService','GlobalConfigService','../utils','includes','jwt','9EhymKt','1080021tCfTTA','__esModule','length','410CJiLYP','id:\x20','../../modules/globalConfig/globalConfig.service','getRequest','@nestjs/core','2000644nFuoby','@nestjs/passport','亲爱的用户,请登录后继续操作,我们正在等您的到来！','AuthGuard','276yYhZIt','JWT_SECRET','function','Bearer','user','UnauthorizedException','UNAUTHORIZED','env','2735540uwcynj','authorization','__metadata','path','281igHELr','decorate','visitor','defineProperty','168201yeMEIF','RedisCacheService','217USnmba','globalConfigService'];_0x7af7=function(){return _0x15c456;};return _0x7af7();}var __decorate=this&&this['__decorate']||function(_0x39bb02,_0x5cdc37,_0x293cba,_0x45ac7d){const _0xf3d6d4=_0x43dd;var _0x381b93=arguments[_0xf3d6d4(0x223)],_0xbd5c4=_0x381b93<0x3?_0x5cdc37:_0x45ac7d===null?_0x45ac7d=Object[_0xf3d6d4(0x1fc)](_0x5cdc37,_0x293cba):_0x45ac7d,_0x42a073;if(typeof Reflect===_0xf3d6d4(0x20a)&&typeof Reflect[_0xf3d6d4(0x1f2)]===_0xf3d6d4(0x1e7))_0xbd5c4=Reflect[_0xf3d6d4(0x1f2)](_0x39bb02,_0x5cdc37,_0x293cba,_0x45ac7d);else{for(var _0x2d838e=_0x39bb02[_0xf3d6d4(0x223)]-0x1;_0x2d838e>=0x0;_0x2d838e--)if(_0x42a073=_0x39bb02[_0x2d838e])_0xbd5c4=(_0x381b93<0x3?_0x42a073(_0xbd5c4):_0x381b93>0x3?_0x42a073(_0x5cdc37,_0x293cba,_0xbd5c4):_0x42a073(_0x5cdc37,_0x293cba))||_0xbd5c4;}return _0x381b93>0x3&&_0xbd5c4&&Object[_0xf3d6d4(0x1f4)](_0x5cdc37,_0x293cba,_0xbd5c4),_0xbd5c4;},__metadata=this&&this[_0x4ddfe5(0x1ef)]||function(_0x2bbf43,_0x2c6ef4){const _0x32b966=_0x4ddfe5;if(typeof Reflect===_0x32b966(0x20a)&&typeof Reflect['metadata']===_0x32b966(0x1e7))return Reflect[_0x32b966(0x212)](_0x2bbf43,_0x2c6ef4);};Object['defineProperty'](exports,_0x4ddfe5(0x222),{'value':!![]}),exports[_0x4ddfe5(0x20e)]=void 0x0;const redisCache_service_1=require(_0x4ddfe5(0x207)),common_1=require(_0x4ddfe5(0x20f)),passport_1=require(_0x4ddfe5(0x1e2)),jwt=require(_0x4ddfe5(0x21a)),core_1=require(_0x4ddfe5(0x1e0)),globalConfig_service_1=require(_0x4ddfe5(0x1de)),utils_1=require(_0x4ddfe5(0x21d)),auth_service_1=require('../../modules/auth/auth.service');let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1[_0x4ddfe5(0x1e4)])(_0x4ddfe5(0x21f)){constructor(_0x3aeaeb,_0x34553a,_0x33f279,_0x211840){const _0x103b94=_0x4ddfe5;super(),this[_0x103b94(0x217)]=_0x3aeaeb,this['moduleRef']=_0x34553a,this[_0x103b94(0x1f8)]=_0x33f279,this['authService']=_0x211840;}async[_0x4ddfe5(0x20c)](_0x3aabf2){const _0x26ed77=_0x4ddfe5;let _0xe5eb88=![];!this[_0x26ed77(0x217)]&&(this[_0x26ed77(0x217)]=this['moduleRef'][_0x26ed77(0x20b)](redisCache_service_1[_0x26ed77(0x1f6)],{'strict':![]}));const _0x581361=_0x3aabf2[_0x26ed77(0x201)]()[_0x26ed77(0x1df)](),_0x8158ad=this[_0x26ed77(0x1f9)](_0x581361);_0x581361[_0x26ed77(0x1e9)]=this['validateToken'](_0x8158ad);if(_0x581361[_0x26ed77(0x1e9)][_0x26ed77(0x202)]===_0x26ed77(0x1f3))throw new common_1[(_0x26ed77(0x20d))](_0x26ed77(0x1e3),common_1[_0x26ed77(0x216)][_0x26ed77(0x1eb)]);const _0x21be6a=this[_0x26ed77(0x1f8)]['getGoMaxAiToken']();if(_0x21be6a&&!_0x581361[_0x26ed77(0x1f0)][_0x26ed77(0x21e)](_0x26ed77(0x214))){const _0x27eddc=(0x0,utils_1[_0x26ed77(0x219)])(utils_1['copyRightMsg']);throw new common_1[(_0x26ed77(0x20d))]((0x0,utils_1[_0x26ed77(0x208)])(_0x27eddc),common_1['HttpStatus'][_0x26ed77(0x200)]);}else _0xe5eb88=!![];return!_0xe5eb88&&process[_0x26ed77(0x209)](0x1),await this[_0x26ed77(0x217)][_0x26ed77(0x1fe)](_0x8158ad,_0x581361),!![];}['extractToken'](_0x34d6f1){const _0x4e67bf=_0x4ddfe5;if(!_0x34d6f1[_0x4e67bf(0x1fa)][_0x4e67bf(0x1ee)]){if(_0x34d6f1[_0x4e67bf(0x1fa)][_0x4e67bf(0x215)]){let _0x3e492c=_0x34d6f1[_0x4e67bf(0x1fa)][_0x4e67bf(0x215)];return _0x3e492c>0x7fffffff&&(_0x3e492c=_0x3e492c['toString']()['slice'](-0x9),_0x3e492c=Number(String(Number(_0x3e492c))),console['log'](_0x4e67bf(0x1dd),_0x3e492c)),this[_0x4e67bf(0x21b)][_0x4e67bf(0x1fd)](_0x3e492c);}return null;}const _0x347985=_0x34d6f1['headers'][_0x4e67bf(0x1ee)][_0x4e67bf(0x205)]('\x20');if(_0x347985[_0x4e67bf(0x223)]!==0x2||_0x347985[0x0]!==_0x4e67bf(0x1e8))return null;return _0x347985[0x1];}[_0x4ddfe5(0x1fb)](_0x13d14b){const _0x3749b9=_0x4ddfe5;try{return jwt['verify'](_0x13d14b,process[_0x3749b9(0x1ec)][_0x3749b9(0x1e6)]);}catch(_0x4a4cf3){throw new common_1[(_0x3749b9(0x20d))]('亲爱的用户,请登录后继续操作,我们正在等您的到来！',common_1['HttpStatus'][_0x3749b9(0x1eb)]);}}[_0x4ddfe5(0x210)](_0x2d059a,_0x1c8c13,_0x35f1d6){const _0x2bc4a0=_0x4ddfe5;if(_0x2d059a||!_0x1c8c13){console[_0x2bc4a0(0x218)]('err:\x20',_0x2d059a);throw _0x2d059a||new common_1[(_0x2bc4a0(0x1ea))]();}return _0x1c8c13;}};JwtAuthGuard=__decorate([(0x0,common_1[_0x4ddfe5(0x204)])(),__metadata(_0x4ddfe5(0x1ff),[redisCache_service_1['RedisCacheService'],core_1[_0x4ddfe5(0x211)],globalConfig_service_1[_0x4ddfe5(0x21c)],auth_service_1[_0x4ddfe5(0x213)]])],JwtAuthGuard),exports[_0x4ddfe5(0x20e)]=JwtAuthGuard;