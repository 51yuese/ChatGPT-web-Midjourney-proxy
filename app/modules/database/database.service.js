'use strict';const _0x251e4b=_0x1753;(function(_0x3e40c8,_0x5afa2a){const _0x36672d=_0x1753,_0x5194f6=_0x3e40c8();while(!![]){try{const _0x56c9b7=parseInt(_0x36672d(0x1a0))/0x1*(parseInt(_0x36672d(0x1d9))/0x2)+parseInt(_0x36672d(0x1ee))/0x3+parseInt(_0x36672d(0x1e9))/0x4*(-parseInt(_0x36672d(0x1cd))/0x5)+-parseInt(_0x36672d(0x1bc))/0x6*(parseInt(_0x36672d(0x1c6))/0x7)+parseInt(_0x36672d(0x1fb))/0x8+parseInt(_0x36672d(0x1b9))/0x9*(-parseInt(_0x36672d(0x1b5))/0xa)+-parseInt(_0x36672d(0x1e0))/0xb*(parseInt(_0x36672d(0x1a5))/0xc);if(_0x56c9b7===_0x5afa2a)break;else _0x5194f6['push'](_0x5194f6['shift']());}catch(_0x3c51de){_0x5194f6['push'](_0x5194f6['shift']());}}}(_0x34a0,0x40c10));var __decorate=this&&this['__decorate']||function(_0x2a5221,_0xc6883,_0x9bde88,_0x4787f7){const _0x90772a=_0x1753;var _0x288b61=arguments[_0x90772a(0x1da)],_0x2c6d96=_0x288b61<0x3?_0xc6883:_0x4787f7===null?_0x4787f7=Object[_0x90772a(0x1be)](_0xc6883,_0x9bde88):_0x4787f7,_0x261dd9;if(typeof Reflect===_0x90772a(0x1df)&&typeof Reflect[_0x90772a(0x1e7)]===_0x90772a(0x1b2))_0x2c6d96=Reflect[_0x90772a(0x1e7)](_0x2a5221,_0xc6883,_0x9bde88,_0x4787f7);else{for(var _0x186157=_0x2a5221[_0x90772a(0x1da)]-0x1;_0x186157>=0x0;_0x186157--)if(_0x261dd9=_0x2a5221[_0x186157])_0x2c6d96=(_0x288b61<0x3?_0x261dd9(_0x2c6d96):_0x288b61>0x3?_0x261dd9(_0xc6883,_0x9bde88,_0x2c6d96):_0x261dd9(_0xc6883,_0x9bde88))||_0x2c6d96;}return _0x288b61>0x3&&_0x2c6d96&&Object[_0x90772a(0x1a4)](_0xc6883,_0x9bde88,_0x2c6d96),_0x2c6d96;},__metadata=this&&this['__metadata']||function(_0x24c3e7,_0x17c65e){const _0x34ded9=_0x1753;if(typeof Reflect===_0x34ded9(0x1df)&&typeof Reflect[_0x34ded9(0x1fe)]===_0x34ded9(0x1b2))return Reflect['metadata'](_0x24c3e7,_0x17c65e);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['DatabaseService']=void 0x0;const common_1=require(_0x251e4b(0x1c2)),typeorm_1=require(_0x251e4b(0x1f4)),bcrypt=require(_0x251e4b(0x1bb));let DatabaseService=class DatabaseService{constructor(_0x114ec7){const _0x1220ab=_0x251e4b;this[_0x1220ab(0x1f8)]=_0x114ec7;}async[_0x251e4b(0x1c0)](){const _0x3094f0=_0x251e4b;await this[_0x3094f0(0x1e4)](),await this[_0x3094f0(0x1f1)]();}async[_0x251e4b(0x1e4)](){const _0x593e30=_0x251e4b,_0x138808=await this['connection']['query']('SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27');if(!_0x138808||_0x138808[_0x593e30(0x1da)]===0x0){const _0x5c7f50=bcrypt[_0x593e30(0x1b1)](_0x593e30(0x1b7),0xa),_0x293268=bcrypt['hashSync']('admin123456',0xa),_0x351b41=_0x593e30(0x1d3),_0xfefe44='defaultAdmin@cooper.com',_0x38b349={'username':_0x593e30(0x1c1),'password':_0x5c7f50,'status':0x1,'email':_0x351b41,'sex':0x1,'role':_0x593e30(0x1c1)},_0xc38dba={'username':_0x593e30(0x1f7),'password':_0x293268,'status':0x1,'email':_0xfefe44,'sex':0x1,'role':'admin'};await this[_0x593e30(0x1a6)](_0x38b349),await this[_0x593e30(0x1a6)](_0xc38dba);}}async[_0x251e4b(0x1a6)](_0x265094){const _0x47ecc5=_0x251e4b;try{const {username:_0x276f23,password:_0x26c7b0,status:_0x4b3f70,email:_0x4b598c,role:_0x3e23ee}=_0x265094,_0x3f1110=await this[_0x47ecc5(0x1f8)][_0x47ecc5(0x1ff)](_0x47ecc5(0x1e3)+_0x276f23+_0x47ecc5(0x1d4)+_0x26c7b0+_0x47ecc5(0x1d4)+_0x4b3f70+'\x27,\x20\x27'+_0x4b598c+_0x47ecc5(0x1d4)+_0x3e23ee+'\x27)'),_0x5cce65=_0x3f1110[_0x47ecc5(0x1ac)],_0x2a21a5=await this[_0x47ecc5(0x1f8)][_0x47ecc5(0x1ff)]('INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27'+_0x5cce65+_0x47ecc5(0x19f));common_1[_0x47ecc5(0x1e5)][_0x47ecc5(0x1d0)](_0x47ecc5(0x1bd)+_0x3e23ee+_0x47ecc5(0x1d8)+_0x276f23+_0x47ecc5(0x1b6)+(_0x276f23===_0x47ecc5(0x1c1)?'super123456':'admin123456')+_0x47ecc5(0x1ce),_0x47ecc5(0x1cb));}catch(_0x310178){console['log'](_0x47ecc5(0x1c4),_0x310178);throw new common_1[(_0x47ecc5(0x1a2))](_0x47ecc5(0x1dd),common_1[_0x47ecc5(0x1fa)][_0x47ecc5(0x1b4)]);}}async[_0x251e4b(0x1f1)](){const _0x223f7b=_0x251e4b,_0x40acc9=[_0x223f7b(0x1f3),_0x223f7b(0x1ef),_0x223f7b(0x1d5),'robotAvatar',_0x223f7b(0x1e8)],_0x353cb0=await this['connection']['query'](_0x223f7b(0x1b8)+_0x40acc9['map'](_0x128a18=>'\x27'+_0x128a18+'\x27')['join'](',')+')\x0a'),_0x5cfe73=parseInt(_0x353cb0[0x0][_0x223f7b(0x1a9)]);_0x5cfe73===0x0&&await this['createBaseSiteConfig']();}async['createBaseSiteConfig'](){const _0x2ad5f8=_0x251e4b;try{const _0x2720dd=_0x2ad5f8(0x1ed),_0x112c84=_0x2ad5f8(0x1a7),_0x57be4a=[{'configKey':_0x2ad5f8(0x1f3),'configVal':_0x2ad5f8(0x19c),'public':0x1,'encry':0x0},{'configKey':'qqNumber','configVal':'124628086','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1d5),'configVal':'lzgzs168','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1fc),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1e8),'configVal':_0x2ad5f8(0x1cf),'public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x1e1),'configVal':_0x2720dd,'public':0x1,'encry':0x0},{'configKey':'baiduSiteId','configVal':_0x2ad5f8(0x198),'public':0x0,'encry':0x0},{'configKey':'baiduToken','configVal':'121.a1600b9b60910feea2ef627ea9776a6f.YGP_CWCOA2lNcIGJ27BwXGxa6nZhBQyLUS4XVaD.TWt9TA','public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x1f0),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1de),'configVal':'https://api.openai.com','public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x1d6),'configVal':_0x112c84,'public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1d7),'configVal':_0x2ad5f8(0x1ec),'public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x1db),'configVal':_0x2ad5f8(0x200),'public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x1c3),'configVal':_0x2ad5f8(0x1cc),'public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x1b0),'configVal':_0x2ad5f8(0x1b3),'public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x1fd),'configVal':_0x2ad5f8(0x1c7),'public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x1a8),'configVal':'GoMaxAiTeam团队','public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x1ad),'configVal':',请妥善保管您的账号，我们将为您赠送50次对话额度和5次绘画额度、祝您使用愉快','public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x199),'configVal':_0x2ad5f8(0x1f6),'public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x1af),'configVal':_0x2ad5f8(0x1cc),'public':0x0,'encry':0x0},{'configKey':_0x2ad5f8(0x201),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x19d),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1aa),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'registerSendDrawMjCount','configVal':'3','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1ae),'configVal':_0x2ad5f8(0x1ab),'public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1f2),'configVal':'20','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel4Count','configVal':'2','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1c8),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1d1),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x19a),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1c5),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1a1),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1c9),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1dc),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x19e),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1d2),'configVal':'light','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1f9),'configVal':'','public':0x1,'encry':0x0},{'configKey':'icpNumber','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1ba),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1f5),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x1a3),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x2ad5f8(0x19b),'configVal':'','public':0x1,'encry':0x0}],_0x5b21ce=await this[_0x2ad5f8(0x1f8)][_0x2ad5f8(0x1ff)](_0x2ad5f8(0x196)+_0x57be4a[_0x2ad5f8(0x1e6)](_0xa234f8=>'(\x27'+_0xa234f8[_0x2ad5f8(0x197)]+_0x2ad5f8(0x1d4)+_0xa234f8['configVal'][_0x2ad5f8(0x1bf)](/'/g,'\x5c\x27')+_0x2ad5f8(0x1d4)+_0xa234f8['public']+_0x2ad5f8(0x1d4)+_0xa234f8[_0x2ad5f8(0x1eb)]+'\x27)')['join'](',\x20'));common_1[_0x2ad5f8(0x1e5)]['log'](_0x2ad5f8(0x1ea),_0x2ad5f8(0x1cb));}catch(_0x45bc75){console['log'](_0x2ad5f8(0x1c4),_0x45bc75);throw new common_1[(_0x2ad5f8(0x1a2))](_0x2ad5f8(0x1ca),common_1[_0x2ad5f8(0x1fa)][_0x2ad5f8(0x1b4)]);}}};DatabaseService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x251e4b(0x1e2),[typeorm_1['Connection']])],DatabaseService),exports[_0x251e4b(0x1cb)]=DatabaseService;function _0x1753(_0x1e0d3,_0x502ee5){const _0x34a093=_0x34a0();return _0x1753=function(_0x175393,_0x2cc0f4){_0x175393=_0x175393-0x196;let _0x1892c5=_0x34a093[_0x175393];return _0x1892c5;},_0x1753(_0x1e0d3,_0x502ee5);}function _0x34a0(){const _0x9bde20=['registerVerifyEmailTitle','用户成功、用户名为[','105958sFQlXM','length','registerVerifyEmailDesc','invitedGuestSendModel4Count','创建默认超级管理员失败！','openaiBaseUrl','object','8184BBolYP','baiduCode','design:paramtypes','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','checkSuperAdmin','Logger','map','decorate','userDefautlAvatar','4HLFAPF','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','encry','GoMaxAiTeam团队账号验证','\x0a\x20\x20<script>\x0a\x20\x20var\x20_hmt\x20=\x20_hmt\x20||\x20[];\x0a\x20\x20(function()\x20{\x0a\x20\x20\x20\x20var\x20hm\x20=\x20document.createElement(\x22script\x22);\x0a\x20\x20\x20\x20hm.src\x20=\x20\x22https://hm.baidu.com/hm.js?cb8c9a3bcadbc200e950b05f9c61a385\x22;\x0a\x20\x20\x20\x20var\x20s\x20=\x20document.getElementsByTagName(\x22script\x22)[0];\x0a\x20\x20\x20\x20s.parentNode.insertBefore(hm,\x20s);\x0a\x20\x20})();\x0a\x20\x20</script>\x0a','565575XUWUeY','qqNumber','buyCramiAddress','checkSiteBaseConfig','firstRregisterSendModel3Count','siteName','typeorm','policeFilingNumber','GoMaxAiTeam账号激活失败','admin','connection','copyrightTitle','HttpStatus','1471720fqtBUf','robotAvatar','registerSuccessEmailTitle','metadata','query','欢迎使用GoMaxAi\x20Team团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','registerSendStatus','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','configKey','19024441','registerFailEmailTitle','inviteGiveSendModel3Count','policeFilingUrl','GoMaxAi','registerSendModel3Count','invitedGuestSendDrawMjCount','\x27,\x200,\x201000,\x20100)','5ZSouhd','inviteGiveSendDrawMjCount','HttpException','icpUrl','defineProperty','1200eukbms','createDefaultUser','\x0a####\x20公告设置\x0a\x20-\x20前往后台设置\x0a\x20-\x20前往后台设置\x0a\x20-\x20前往后台设置\x0a\x20-\x20前往后台设置\x0a\x20-\x20前往后台设置\x0a\x20-\x20前往后台设置\x0a','registerSuccessEmailTeamName','count','registerSendModel4Count','500','insertId','registerSuccessEmaileAppend','firstRegisterSendRank','registerFailEmailTeamName','registerVerifyExpir','hashSync','function','1800','INTERNAL_SERVER_ERROR','130MvRThA',']、初始密码为[','super123456','\x0a\x20\x20\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','20133xvKIAH','icpNumber','bcryptjs','42kiMXOE','初始化创建','getOwnPropertyDescriptor','replace','onModuleInit','super','@nestjs/common','registerVerifyEmailFrom','error:\x20','inviteGiveSendModel4Count','40579TzHexd','GoMaxAiTeam团队账号激活成功','firstRregisterSendDrawMjCount','invitedGuestSendModel3Count','创建默认网站配置失败！','DatabaseService','GoMaxAiTeam团队','1140465gvgqOK',']\x20==============>\x20请注意查阅','https://public-1300678944.cos.ap-shanghai.myqcloud.com/blog/1682571295452image.png','log','inviteSendStatus','theme','defaultSuper@cooper.com','\x27,\x20\x27','vxNumber','noticeInfo'];_0x34a0=function(){return _0x9bde20;};return _0x34a0();}