'use strict';const _0x22d517=_0x1309;function _0x1309(_0x2720f9,_0x11409f){const _0xd08f8c=_0xd08f();return _0x1309=function(_0x1309b4,_0x27aa1a){_0x1309b4=_0x1309b4-0x156;let _0x30bcd1=_0xd08f8c[_0x1309b4];return _0x30bcd1;},_0x1309(_0x2720f9,_0x11409f);}(function(_0x2335fc,_0x177697){const _0x50afaf=_0x1309,_0x4e8571=_0x2335fc();while(!![]){try{const _0x51dc9a=-parseInt(_0x50afaf(0x170))/0x1+-parseInt(_0x50afaf(0x15e))/0x2*(parseInt(_0x50afaf(0x15c))/0x3)+parseInt(_0x50afaf(0x158))/0x4*(parseInt(_0x50afaf(0x15f))/0x5)+parseInt(_0x50afaf(0x166))/0x6+-parseInt(_0x50afaf(0x16c))/0x7+parseInt(_0x50afaf(0x16b))/0x8*(parseInt(_0x50afaf(0x157))/0x9)+parseInt(_0x50afaf(0x163))/0xa;if(_0x51dc9a===_0x177697)break;else _0x4e8571['push'](_0x4e8571['shift']());}catch(_0x3441e2){_0x4e8571['push'](_0x4e8571['shift']());}}}(_0xd08f,0x88d58));function _0xd08f(){const _0x2f9773=['content','603PvHUMp','5416odoPZs','__esModule','getModel','fromUser','3RTGYLW','string','1338874FEMvVI','610JxdHCA','V1.5','SparkClient','ModelVersion','4156900iqKBiT','spark-node-sdk','usage','2582832QNbWzj','XunFeiSpark','text','ChatMessage','includes','132040iudUXE','4555845OkfbCT','spark','sendMessageFromXunFei','map','236441ZxKpnP','uasge'];_0xd08f=function(){return _0x2f9773;};return _0xd08f();}Object['defineProperty'](exports,_0x22d517(0x159),{'value':!![]}),exports['XunFeiSpark']=void 0x0;const spark_node_sdk_1=require(_0x22d517(0x164));class XunFeiSpark{constructor(_0x2bd984){const _0xadfad1=_0x22d517;this['message']={},this[_0xadfad1(0x15a)]=_0x1d2a65=>{const _0x2be2b3=_0xadfad1;return _0x1d2a65[_0x2be2b3(0x16a)](_0x2be2b3(0x160))?spark_node_sdk_1['ModelVersion']['V1_5']:_0x1d2a65[_0x2be2b3(0x16a)]('V2.0')?spark_node_sdk_1['ModelVersion']['V2']:spark_node_sdk_1[_0x2be2b3(0x162)]['V3'];};const {appid:_0x1faab0,secret:_0x5787b0,key:_0x5469c1}=_0x2bd984;this['spark']=new spark_node_sdk_1[(_0xadfad1(0x161))](_0x1faab0,_0x5469c1,_0x5787b0);}async[_0x22d517(0x16e)](_0x5f4697,_0x244595){const _0x393181=_0x22d517;let _0x5c1917={'usage':{'completion_tokens':0x0,'prompt_tokens':0x0,'question_tokens':0x0,'total_tokens':0x0},'text':''},_0x4391a2='';const {temperature:_0xe678ce,chatId:_0x2a3bcc,model:_0x44375a,onProgress:_0x406018,abortController:_0x5e69ef}=_0x244595,_0x11b943=this[_0x393181(0x15a)](_0x44375a);let _0x1fef7d=typeof _0x5f4697===_0x393181(0x15d)?[spark_node_sdk_1[_0x393181(0x169)][_0x393181(0x15b)](_0x5f4697)]:_0x5f4697[_0x393181(0x16f)](_0x403919=>spark_node_sdk_1[_0x393181(0x169)][_0x393181(0x15b)](_0x403919[_0x393181(0x156)]));return await this[_0x393181(0x16d)]['chatAsync'](_0x11b943,_0x1fef7d,_0x4d2b35=>{const _0x1247ea=_0x393181;try{_0x4d2b35&&(_0x4391a2+=_0x4d2b35[_0x1247ea(0x168)]),_0x5c1917[_0x1247ea(0x165)]=_0x4d2b35[_0x1247ea(0x171)],_0x5c1917['text']=_0x4391a2,_0x406018(_0x5c1917);}catch(_0x4b488f){console['log'](_0x4b488f),_0x406018(_0x5c1917);}},{'temperature':_0xe678ce||0.5,'max_tokens':0x800,'top_k':0x4,'chat_id':null},_0x2a3bcc,_0x5e69ef),{'text':_0x4391a2,'usage':_0x5c1917[_0x393181(0x165)]};}}exports[_0x22d517(0x167)]=XunFeiSpark;