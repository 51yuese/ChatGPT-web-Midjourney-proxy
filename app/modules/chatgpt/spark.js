'use strict';const _0x3974e7=_0x49ae;(function(_0x540efa,_0x1ad562){const _0x334b8e=_0x49ae,_0x13c875=_0x540efa();while(!![]){try{const _0x3b4cfb=parseInt(_0x334b8e(0x16a))/0x1+-parseInt(_0x334b8e(0x15d))/0x2+-parseInt(_0x334b8e(0x162))/0x3+-parseInt(_0x334b8e(0x164))/0x4*(-parseInt(_0x334b8e(0x16e))/0x5)+-parseInt(_0x334b8e(0x15b))/0x6+-parseInt(_0x334b8e(0x173))/0x7*(parseInt(_0x334b8e(0x165))/0x8)+-parseInt(_0x334b8e(0x166))/0x9*(-parseInt(_0x334b8e(0x168))/0xa);if(_0x3b4cfb===_0x1ad562)break;else _0x13c875['push'](_0x13c875['shift']());}catch(_0xd080a5){_0x13c875['push'](_0x13c875['shift']());}}}(_0xd186,0xa1ffb));function _0xd186(){const _0x45b530=['1670OtrzjC','XunFeiSpark','809774uPmUSG','spark','defineProperty','map','1195785WrXdcs','V1.5','ModelVersion','text','chatAsync','1750ojfgFU','content','V1_5','log','ChatMessage','getModel','3104778UiDeKI','V2.0','692548pYJpeX','SparkClient','uasge','usage','message','2716332pgxrqr','__esModule','12YLalVg','33544nBrefa','105291fjTJjK','fromUser'];_0xd186=function(){return _0x45b530;};return _0xd186();}function _0x49ae(_0x3ac5af,_0x29918b){const _0xd186f1=_0xd186();return _0x49ae=function(_0x49aeda,_0x3306ff){_0x49aeda=_0x49aeda-0x158;let _0x48bfad=_0xd186f1[_0x49aeda];return _0x48bfad;},_0x49ae(_0x3ac5af,_0x29918b);}Object[_0x3974e7(0x16c)](exports,_0x3974e7(0x163),{'value':!![]}),exports['XunFeiSpark']=void 0x0;const spark_node_sdk_1=require('spark-node-sdk');class XunFeiSpark{constructor(_0x96d92d){const _0x500826=_0x3974e7;this[_0x500826(0x161)]={},this['getModel']=_0x1b268d=>{const _0x267de9=_0x500826;return _0x1b268d['includes'](_0x267de9(0x16f))?spark_node_sdk_1[_0x267de9(0x170)][_0x267de9(0x175)]:_0x1b268d['includes'](_0x267de9(0x15c))?spark_node_sdk_1[_0x267de9(0x170)]['V2']:spark_node_sdk_1[_0x267de9(0x170)]['V3'];};const {appid:_0x12eb9a,secret:_0x14575a,key:_0x25e2c4}=_0x96d92d;this['spark']=new spark_node_sdk_1[(_0x500826(0x15e))](_0x12eb9a,_0x25e2c4,_0x14575a);}async['sendMessageFromXunFei'](_0x18260e,_0x477cf3){const _0x1fc2b2=_0x3974e7;let _0x1d035c={'usage':{'completion_tokens':0x0,'prompt_tokens':0x0,'question_tokens':0x0,'total_tokens':0x0},'text':''},_0x4501b9='';const {temperature:_0x2435dc,chatId:_0x33e0f7,model:_0xa96349,onProgress:_0x4455d3,abortController:_0x51f671}=_0x477cf3,_0x3db6=this[_0x1fc2b2(0x15a)](_0xa96349);let _0x306dcf=typeof _0x18260e==='string'?[spark_node_sdk_1[_0x1fc2b2(0x159)]['fromUser'](_0x18260e)]:_0x18260e[_0x1fc2b2(0x16d)](_0x14141d=>spark_node_sdk_1[_0x1fc2b2(0x159)][_0x1fc2b2(0x167)](_0x14141d[_0x1fc2b2(0x174)]));return await this[_0x1fc2b2(0x16b)][_0x1fc2b2(0x172)](_0x3db6,_0x306dcf,_0x2812d6=>{const _0x33e80f=_0x1fc2b2;try{_0x2812d6&&(_0x4501b9+=_0x2812d6[_0x33e80f(0x171)]),_0x1d035c['usage']=_0x2812d6[_0x33e80f(0x15f)],_0x1d035c[_0x33e80f(0x171)]=_0x4501b9,_0x4455d3(_0x1d035c);}catch(_0x15a04a){console[_0x33e80f(0x158)](_0x15a04a),_0x4455d3(_0x1d035c);}},{'temperature':_0x2435dc||0.5,'max_tokens':0x800,'top_k':0x4,'chat_id':null},_0x33e0f7,_0x51f671),{'text':_0x4501b9,'usage':_0x1d035c[_0x1fc2b2(0x160)]};}}exports[_0x3974e7(0x169)]=XunFeiSpark;