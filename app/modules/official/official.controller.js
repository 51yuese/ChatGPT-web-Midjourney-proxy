'use strict';const _0x4222af=_0x50af;(function(_0x35cd7f,_0x360aa1){const _0x23b084=_0x50af,_0x1a5671=_0x35cd7f();while(!![]){try{const _0x276895=-parseInt(_0x23b084(0xce))/0x1*(-parseInt(_0x23b084(0xe5))/0x2)+parseInt(_0x23b084(0xe0))/0x3*(-parseInt(_0x23b084(0xc6))/0x4)+parseInt(_0x23b084(0xbb))/0x5+-parseInt(_0x23b084(0xa3))/0x6+-parseInt(_0x23b084(0xd4))/0x7+-parseInt(_0x23b084(0xcd))/0x8+parseInt(_0x23b084(0x96))/0x9;if(_0x276895===_0x360aa1)break;else _0x1a5671['push'](_0x1a5671['shift']());}catch(_0x32e4d0){_0x1a5671['push'](_0x1a5671['shift']());}}}(_0x64fd,0x6b6cf));function _0x50af(_0x463b4a,_0x37934c){const _0x64fddc=_0x64fd();return _0x50af=function(_0x50af6b,_0x1f5e35){_0x50af6b=_0x50af6b-0x85;let _0x492557=_0x64fddc[_0x50af6b];return _0x492557;},_0x50af(_0x463b4a,_0x37934c);}var __decorate=this&&this['__decorate']||function(_0x3f27f7,_0x11eb1a,_0x8be01e,_0x4f1aee){const _0x2c782b=_0x50af;var _0x595c0c=arguments['length'],_0x348a04=_0x595c0c<0x3?_0x11eb1a:_0x4f1aee===null?_0x4f1aee=Object[_0x2c782b(0xac)](_0x11eb1a,_0x8be01e):_0x4f1aee,_0x17dcd9;if(typeof Reflect===_0x2c782b(0xcf)&&typeof Reflect[_0x2c782b(0xc2)]==='function')_0x348a04=Reflect[_0x2c782b(0xc2)](_0x3f27f7,_0x11eb1a,_0x8be01e,_0x4f1aee);else{for(var _0x2e0b4f=_0x3f27f7[_0x2c782b(0xa8)]-0x1;_0x2e0b4f>=0x0;_0x2e0b4f--)if(_0x17dcd9=_0x3f27f7[_0x2e0b4f])_0x348a04=(_0x595c0c<0x3?_0x17dcd9(_0x348a04):_0x595c0c>0x3?_0x17dcd9(_0x11eb1a,_0x8be01e,_0x348a04):_0x17dcd9(_0x11eb1a,_0x8be01e))||_0x348a04;}return _0x595c0c>0x3&&_0x348a04&&Object[_0x2c782b(0xe7)](_0x11eb1a,_0x8be01e,_0x348a04),_0x348a04;},__metadata=this&&this[_0x4222af(0x93)]||function(_0x3ccc18,_0x4b35c8){const _0xa198c7=_0x4222af;if(typeof Reflect==='object'&&typeof Reflect[_0xa198c7(0x99)]===_0xa198c7(0xb4))return Reflect['metadata'](_0x3ccc18,_0x4b35c8);},__param=this&&this[_0x4222af(0xdf)]||function(_0x12c3ab,_0x185eb5){return function(_0x4b201a,_0x418dd9){_0x185eb5(_0x4b201a,_0x418dd9,_0x12c3ab);};};Object[_0x4222af(0xe7)](exports,'__esModule',{'value':!![]}),exports[_0x4222af(0xa1)]=void 0x0;const common_1=require(_0x4222af(0xad)),swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require(_0x4222af(0xbd)),official_service_1=require(_0x4222af(0x9a)),axios_1=require(_0x4222af(0x8a)),getQrCode_dto_1=require(_0x4222af(0xa0)),getQrSceneStr_dto_1=require('./dto/getQrSceneStr.dto'),Login_vo_1=require(_0x4222af(0xbe));function _0x64fd(){const _0x470d0a=['getQRCode','genXmlMsgByConfig','loginBySceneStr','officialSubscribeText','SCAN','__metadata','JwtAuthGuard','获取绑定二维码的sceneStr','4584744GloPkb','echostr','UseGuards','metadata','./official.service','default','公众号静默登录','code','get\x20通知>>>','getQRSceneStrByBind','./dto/getQrCode.dto','OfficialController','officialBindAccountText','331302lyyYAl','Post','genXmlMsg','扫码绑定轮询查询','ApiOperation','length','design:paramtypes','Controller','Query','getOwnPropertyDescriptor','@nestjs/common','timestamp','design:type','eventkey','https://kaifa.qumao518.vip/api/official/notify','includes','公众号通知接口POST','function','Get','VIEW','Logger','notifyPost','success','log','4338880qLxPcp','signature','../../common/auth/jwtAuth.guard','./vo/Login.vo','env','获取登录二维码sceneStr','notify','decorate','officialService','design:returntype','scan','47708AlqzwO','prototype','application/json','Body','content','offical\x20getQRCode','event','732624nuqdRm','158391FxQqqE','object','url','Req','getRedirectUrl','客户端发送了文字消息','6103748YbAVnU','aotoPlay','gomaxai.qumao518.vip','Res','send','scanBindWx','status','getAccessToken','GetQrSceneStrDto','bindWxBySceneStr','CLICK','__param','99SDYrKx','loginByCode','qrscene_','text','unsubscribe','6MqHCDS','getQRCodeTicket','defineProperty','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=','type','getJsapiTicket','扫码登录轮询查询','GetQrCodeDto','getQRSceneStr','axios','sceneStr','fromusername','official'];_0x64fd=function(){return _0x470d0a;};return _0x64fd();}let OfficialController=class OfficialController{constructor(_0x4a7fcb){const _0x30e084=_0x4222af;this[_0x30e084(0xc3)]=_0x4a7fcb;}async[_0x4222af(0xc1)](_0x3ad6ef,_0x485c1e,_0x2f41ae){const _0xb8f11c=_0x4222af;console[_0xb8f11c(0xba)](_0xb8f11c(0x9e),_0x485c1e,_0x2f41ae);const _0x3f6923=await this[_0xb8f11c(0xc3)]['verify'](_0x485c1e[_0xb8f11c(0xbc)],_0x485c1e['nonce'],_0x485c1e[_0xb8f11c(0xae)]);return _0x3f6923?_0x485c1e[_0xb8f11c(0x97)]:'';}async[_0x4222af(0xb8)](_0x3d459c,_0xae772d,_0x2a148d,_0x386e9a){const _0x424937=_0x4222af,{xml:_0x2cac70}=_0x2a148d;console[_0x424937(0xba)]('xml:\x20',_0x2cac70);const _0x33fae8=process[_0x424937(0xbf)]['GOMAXAI_HOST'];_0x33fae8===_0x424937(0xd6)&&((0x0,axios_1[_0x424937(0x9b)])({'url':_0x424937(0xb1),'data':_0x2a148d,'method':'POST','headers':{'Content-Type':_0x424937(0xc8)}}),(0x0,axios_1[_0x424937(0x9b)])({'url':'https://ceshi.qumao518.vip/api/official/notify','data':_0x2a148d,'method':'POST','headers':{'Content-Type':_0x424937(0xc8)}}));if(_0x2cac70['msgtype'][0x0]==_0x424937(0xcc)){if(_0x2cac70[_0x424937(0xcc)][0x0]==_0x424937(0xb6)||_0x2cac70[_0x424937(0xcc)][0x0]==_0x424937(0xde))return _0x386e9a['status'](0xc8)[_0x424937(0xd8)]('');if(_0x2cac70['event'][0x0]==_0x424937(0x92)){console[_0x424937(0xba)]('扫码');const _0x499b18=_0x2cac70[_0x424937(0xb0)][0x0];if(_0x499b18[_0x424937(0xb2)]('/')){this['officialService'][_0x424937(0xd9)](_0x2cac70[_0x424937(0x8c)][0x0],_0x499b18);const _0xb80090=await this[_0x424937(0xc3)]['genXmlMsgByConfig'](_0x2cac70,_0x424937(0xa2));return _0x386e9a[_0x424937(0xda)](0xc8)[_0x424937(0xd8)](_0xb80090);}this[_0x424937(0xc3)][_0x424937(0xc5)](_0x2cac70['fromusername'][0x0],_0x499b18);const _0x1e1712=await this[_0x424937(0xc3)]['genXmlMsgByConfig'](_0x2cac70,'officialScanLoginText');return _0x386e9a[_0x424937(0xda)](0xc8)[_0x424937(0xd8)](_0x1e1712);}if(_0x2cac70[_0x424937(0xcc)][0x0]=='subscribe'){console[_0x424937(0xba)]('订阅',_0x2cac70[_0x424937(0xb0)][0x0]);const _0x2e38a1=_0x2cac70[_0x424937(0xb0)][0x0]['split'](_0x424937(0xe2))[0x1];console[_0x424937(0xba)]('sceneStr:\x20',_0x2e38a1);if(!_0x2e38a1){const _0x11ed37=await this['officialService']['genXmlMsgByConfig'](_0x2cac70,'officialSubscribeText');return _0x386e9a['status'](0xc8)[_0x424937(0xd8)](_0x11ed37);}if(_0x2e38a1[_0x424937(0xb2)]('/')){this[_0x424937(0xc3)][_0x424937(0xd9)](_0x2cac70[_0x424937(0x8c)][0x0],_0x2e38a1);const _0x215988=await this['officialService'][_0x424937(0x8f)](_0x2cac70,_0x424937(0xa2));return _0x386e9a[_0x424937(0xda)](0xc8)[_0x424937(0xd8)](_0x215988);}this[_0x424937(0xc3)][_0x424937(0xc5)](_0x2cac70[_0x424937(0x8c)][0x0],_0x2e38a1);const _0x4b5077=await this['officialService'][_0x424937(0x8f)](_0x2cac70,_0x424937(0x91));return _0x386e9a[_0x424937(0xda)](0xc8)[_0x424937(0xd8)](_0x4b5077);}if(_0x2cac70[_0x424937(0xcc)][0x0]==_0x424937(0xe4))return _0x386e9a[_0x424937(0xda)](0xc8)[_0x424937(0xd8)]('');}if(_0x2cac70['msgtype'][0x0]==_0x424937(0xe3)){console['log'](_0x424937(0xd3));const _0x5ea75b=await this[_0x424937(0xc3)][_0x424937(0xd5)](_0x2cac70[_0x424937(0xca)][0x0]),_0x2e0ebf=await this[_0x424937(0xc3)][_0x424937(0xa5)](_0x2cac70,_0x5ea75b);return _0x386e9a[_0x424937(0xda)](0xc8)[_0x424937(0xd8)](_0x2e0ebf);}return _0x424937(0xb9);}async[_0x4222af(0x89)](_0x24fe19){const _0x6dc158=_0x4222af;return this['officialService'][_0x6dc158(0x89)](_0x24fe19);}async[_0x4222af(0x9f)](_0x19e63e){const _0x3fcc4f=_0x4222af;return this[_0x3fcc4f(0xc3)][_0x3fcc4f(0x9f)](_0x19e63e);}async[_0x4222af(0x8e)](_0x394e6e){const _0x44a987=_0x4222af,_0xeca6e6=await this['officialService'][_0x44a987(0xe6)](_0x394e6e[_0x44a987(0x8b)]);return common_1[_0x44a987(0xb7)][_0x44a987(0xba)](_0xeca6e6,_0x44a987(0xcb)),_0x44a987(0xe8)+encodeURIComponent(_0xeca6e6);}async[_0x4222af(0x90)](_0x5e6e71,_0x373d4e){const _0x587078=_0x4222af;return this['officialService'][_0x587078(0x90)](_0x5e6e71,_0x373d4e['sceneStr']);}async[_0x4222af(0xdd)](_0x271c79,_0x38dc20){const _0x3cfe44=_0x4222af;return this[_0x3cfe44(0xc3)][_0x3cfe44(0xdd)](_0x271c79,_0x38dc20[_0x3cfe44(0x8b)]);}async[_0x4222af(0xd2)](_0x1f8ea6){const _0x5b8365=_0x4222af;return this['officialService'][_0x5b8365(0xd2)](_0x1f8ea6[_0x5b8365(0xd0)]);}async['getJsapiTicket'](_0x3e2624){const _0x238821=_0x4222af;return this[_0x238821(0xc3)][_0x238821(0x86)](_0x3e2624[_0x238821(0xd0)]);}async[_0x4222af(0xe1)](_0x412ce6,_0x49feca){const _0x5c7357=_0x4222af;return this[_0x5c7357(0xc3)][_0x5c7357(0xe1)](_0x412ce6,_0x49feca[_0x5c7357(0x9d)]);}async[_0x4222af(0xdb)](_0x14035e,_0x4b85a7){const _0xd4396d=_0x4222af;return this[_0xd4396d(0xc3)]['getAccessToken'](_0x14035e,_0x4b85a7);}};__decorate([(0x0,common_1[_0x4222af(0xb5)])(_0x4222af(0xc1)),(0x0,swagger_1[_0x4222af(0xa7)])({'summary':'公众号通知接口GET'}),__param(0x0,(0x0,common_1[_0x4222af(0xd1)])()),__param(0x1,(0x0,common_1[_0x4222af(0xab)])()),__param(0x2,(0x0,common_1[_0x4222af(0xc9)])()),__metadata(_0x4222af(0xaf),Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata('design:returntype',Promise)],OfficialController['prototype'],_0x4222af(0xc1),null),__decorate([(0x0,common_1['Post'])(_0x4222af(0xc1)),(0x0,swagger_1[_0x4222af(0xa7)])({'summary':_0x4222af(0xb3)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x4222af(0xab)])()),__param(0x2,(0x0,common_1['Body'])()),__param(0x3,(0x0,common_1[_0x4222af(0xd7)])()),__metadata(_0x4222af(0xaf),Function),__metadata(_0x4222af(0xa9),[Object,Object,Object,Object]),__metadata(_0x4222af(0xc4),Promise)],OfficialController[_0x4222af(0xc7)],_0x4222af(0xb8),null),__decorate([(0x0,common_1['Post'])(_0x4222af(0x89)),(0x0,swagger_1[_0x4222af(0xa7)])({'summary':_0x4222af(0xc0)}),__param(0x0,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata('design:paramtypes',[getQrSceneStr_dto_1[_0x4222af(0xdc)]]),__metadata(_0x4222af(0xc4),Promise)],OfficialController['prototype'],_0x4222af(0x89),null),__decorate([(0x0,common_1['Post'])(_0x4222af(0x9f)),(0x0,swagger_1[_0x4222af(0xa7)])({'summary':_0x4222af(0x95)}),(0x0,common_1[_0x4222af(0x98)])(jwtAuth_guard_1[_0x4222af(0x94)]),__param(0x0,(0x0,common_1[_0x4222af(0xd1)])()),__metadata(_0x4222af(0xaf),Function),__metadata(_0x4222af(0xa9),[Object]),__metadata(_0x4222af(0xc4),Promise)],OfficialController['prototype'],_0x4222af(0x9f),null),__decorate([(0x0,common_1[_0x4222af(0xb5)])(_0x4222af(0x8e)),(0x0,swagger_1[_0x4222af(0xa7)])({'summary':'获取二维码'}),__param(0x0,(0x0,common_1[_0x4222af(0xab)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[getQrCode_dto_1[_0x4222af(0x88)]]),__metadata(_0x4222af(0xc4),Promise)],OfficialController['prototype'],_0x4222af(0x8e),null),__decorate([(0x0,common_1[_0x4222af(0xa4)])(_0x4222af(0x90)),(0x0,swagger_1[_0x4222af(0xa7)])({'summary':_0x4222af(0x87)}),__param(0x0,(0x0,common_1[_0x4222af(0xd1)])()),__param(0x1,(0x0,common_1[_0x4222af(0xc9)])()),__metadata(_0x4222af(0xaf),Function),__metadata(_0x4222af(0xa9),[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x4222af(0xc4),Promise)],OfficialController[_0x4222af(0xc7)],'loginBySceneStr',null),__decorate([(0x0,common_1[_0x4222af(0xa4)])('bindWxBySceneStr'),(0x0,swagger_1[_0x4222af(0xa7)])({'summary':_0x4222af(0xa6)}),(0x0,common_1[_0x4222af(0x98)])(jwtAuth_guard_1[_0x4222af(0x94)]),__param(0x0,(0x0,common_1[_0x4222af(0xd1)])()),__param(0x1,(0x0,common_1[_0x4222af(0xc9)])()),__metadata(_0x4222af(0xaf),Function),__metadata(_0x4222af(0xa9),[Object,getQrCode_dto_1[_0x4222af(0x88)]]),__metadata(_0x4222af(0xc4),Promise)],OfficialController[_0x4222af(0xc7)],_0x4222af(0xdd),null),__decorate([(0x0,common_1[_0x4222af(0xa4)])(_0x4222af(0xd2)),(0x0,swagger_1[_0x4222af(0xa7)])({'summary':'获取登录跳转地址'}),__param(0x0,(0x0,common_1[_0x4222af(0xc9)])()),__metadata('design:type',Function),__metadata(_0x4222af(0xa9),[Object]),__metadata(_0x4222af(0xc4),Promise)],OfficialController[_0x4222af(0xc7)],_0x4222af(0xd2),null),__decorate([(0x0,common_1[_0x4222af(0xa4)])('getJsapiTicket'),(0x0,swagger_1[_0x4222af(0xa7)])({'summary':'获取注册配置'}),__param(0x0,(0x0,common_1[_0x4222af(0xc9)])()),__metadata(_0x4222af(0xaf),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x4222af(0xc4),Promise)],OfficialController[_0x4222af(0xc7)],_0x4222af(0x86),null),__decorate([(0x0,common_1['Post'])(_0x4222af(0xe1)),(0x0,swagger_1['ApiOperation'])({'summary':_0x4222af(0x9c)}),(0x0,swagger_1['ApiResponse'])({'type':Login_vo_1['OfficialLoginVO']}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata(_0x4222af(0xa9),[Object,Object]),__metadata(_0x4222af(0xc4),Promise)],OfficialController[_0x4222af(0xc7)],_0x4222af(0xe1),null),__decorate([(0x0,common_1[_0x4222af(0xb5)])(_0x4222af(0xdb)),__param(0x0,(0x0,common_1[_0x4222af(0xd1)])()),__param(0x1,(0x0,common_1[_0x4222af(0xab)])(_0x4222af(0x85))),__metadata(_0x4222af(0xaf),Function),__metadata('design:paramtypes',[Object,String]),__metadata(_0x4222af(0xc4),Promise)],OfficialController[_0x4222af(0xc7)],_0x4222af(0xdb),null),OfficialController=__decorate([(0x0,swagger_1['ApiTags'])('official'),(0x0,common_1[_0x4222af(0xaa)])(_0x4222af(0x8d)),__metadata(_0x4222af(0xa9),[official_service_1['OfficialService']])],OfficialController),exports[_0x4222af(0xa1)]=OfficialController;