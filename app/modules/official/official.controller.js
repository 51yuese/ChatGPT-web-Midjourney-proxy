'use strict';const _0x5bb0ec=_0x1fa6;(function(_0x4e8d49,_0xcc72c0){const _0x2b434e=_0x1fa6,_0xbb0a45=_0x4e8d49();while(!![]){try{const _0x3119a2=parseInt(_0x2b434e(0x1b6))/0x1+parseInt(_0x2b434e(0x1f0))/0x2*(parseInt(_0x2b434e(0x1b9))/0x3)+-parseInt(_0x2b434e(0x1f6))/0x4*(-parseInt(_0x2b434e(0x1e0))/0x5)+parseInt(_0x2b434e(0x202))/0x6+-parseInt(_0x2b434e(0x1fe))/0x7*(parseInt(_0x2b434e(0x1b1))/0x8)+-parseInt(_0x2b434e(0x1a3))/0x9*(parseInt(_0x2b434e(0x1e1))/0xa)+parseInt(_0x2b434e(0x1c8))/0xb*(-parseInt(_0x2b434e(0x1d5))/0xc);if(_0x3119a2===_0xcc72c0)break;else _0xbb0a45['push'](_0xbb0a45['shift']());}catch(_0x15a762){_0xbb0a45['push'](_0xbb0a45['shift']());}}}(_0x7034,0xba5e7));function _0x7034(){const _0x478c96=['获取注册配置','getQRCode','fromusername','send','13836ccjFLW','design:type','get\x20通知>>>','scanBindWx','getJsapiTicket','./official.service','official','nonce','__metadata','./dto/getQrCode.dto','Res','10vmsjco','10NakIts','signature','design:paramtypes','genXmlMsg','扫码绑定轮询查询','loginByCode','GetQrCodeDto','获取登录二维码sceneStr','decorate','length','officialService','CLICK','officialBindAccountText','timestamp','msgtype','2540ZUhnoa','VIEW','getQRSceneStr','loginBySceneStr','echostr','bindWxBySceneStr','1174996KSBvKK','OfficialService','officialScanLoginText','status','metadata','notifyPost','eventkey','defineProperty','7ZNWHzl','OfficialController','getRedirectUrl','Post','5900004DQTByM','notify','genXmlMsgByConfig','aotoPlay','6122610OrINbX','__param','url','SCAN','客户端发送了文字消息','sceneStr:\x20','log','Body','__decorate','scan','获取登录跳转地址','Get','Req','split','4180968sdlZEL','event','content','Query','getQRSceneStrByBind','1493259afjWft','officialSubscribeText','verify','2775YTjVSF','object','JwtAuthGuard','subscribe','prototype','success','公众号通知接口POST','getQRCodeTicket','function','UseGuards','code','ApiTags','sceneStr','获取绑定二维码的sceneStr','@nestjs/common','21681LYmbhZ','Controller','GetQrSceneStrDto','公众号静默登录','unsubscribe','__esModule','ApiOperation','design:returntype','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket='];_0x7034=function(){return _0x478c96;};return _0x7034();}var __decorate=this&&this[_0x5bb0ec(0x1ab)]||function(_0x5d9c0c,_0xfd34fe,_0x504305,_0x4c00e0){const _0x28ddc6=_0x5bb0ec;var _0x346905=arguments[_0x28ddc6(0x1ea)],_0x2b8bee=_0x346905<0x3?_0xfd34fe:_0x4c00e0===null?_0x4c00e0=Object['getOwnPropertyDescriptor'](_0xfd34fe,_0x504305):_0x4c00e0,_0x904718;if(typeof Reflect===_0x28ddc6(0x1ba)&&typeof Reflect['decorate']===_0x28ddc6(0x1c1))_0x2b8bee=Reflect[_0x28ddc6(0x1e9)](_0x5d9c0c,_0xfd34fe,_0x504305,_0x4c00e0);else{for(var _0x574e77=_0x5d9c0c['length']-0x1;_0x574e77>=0x0;_0x574e77--)if(_0x904718=_0x5d9c0c[_0x574e77])_0x2b8bee=(_0x346905<0x3?_0x904718(_0x2b8bee):_0x346905>0x3?_0x904718(_0xfd34fe,_0x504305,_0x2b8bee):_0x904718(_0xfd34fe,_0x504305))||_0x2b8bee;}return _0x346905>0x3&&_0x2b8bee&&Object[_0x28ddc6(0x1fd)](_0xfd34fe,_0x504305,_0x2b8bee),_0x2b8bee;},__metadata=this&&this[_0x5bb0ec(0x1dd)]||function(_0xb4a9f3,_0x511076){const _0x10c5dc=_0x5bb0ec;if(typeof Reflect==='object'&&typeof Reflect[_0x10c5dc(0x1fa)]==='function')return Reflect[_0x10c5dc(0x1fa)](_0xb4a9f3,_0x511076);},__param=this&&this[_0x5bb0ec(0x1a4)]||function(_0x12fe57,_0x337ea6){return function(_0x4612d2,_0x1ff212){_0x337ea6(_0x4612d2,_0x1ff212,_0x12fe57);};};function _0x1fa6(_0x4399d0,_0x19483a){const _0x7034ca=_0x7034();return _0x1fa6=function(_0x1fa67a,_0x250e74){_0x1fa67a=_0x1fa67a-0x1a3;let _0x148757=_0x7034ca[_0x1fa67a];return _0x148757;},_0x1fa6(_0x4399d0,_0x19483a);}Object[_0x5bb0ec(0x1fd)](exports,_0x5bb0ec(0x1cd),{'value':!![]}),exports['OfficialController']=void 0x0;const common_1=require(_0x5bb0ec(0x1c7)),swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require('../../common/auth/jwtAuth.guard'),official_service_1=require(_0x5bb0ec(0x1da)),getQrCode_dto_1=require(_0x5bb0ec(0x1de)),getQrSceneStr_dto_1=require('./dto/getQrSceneStr.dto');let OfficialController=class OfficialController{constructor(_0x331fae){const _0x2c8c2a=_0x5bb0ec;this[_0x2c8c2a(0x1eb)]=_0x331fae;}async[_0x5bb0ec(0x203)](_0x56187b,_0x309b82,_0x10defb){const _0x40cd1c=_0x5bb0ec;console[_0x40cd1c(0x1a9)](_0x40cd1c(0x1d7),_0x309b82,_0x10defb);const _0x381aeb=await this['officialService'][_0x40cd1c(0x1b8)](_0x309b82[_0x40cd1c(0x1e2)],_0x309b82[_0x40cd1c(0x1dc)],_0x309b82[_0x40cd1c(0x1ee)]);return _0x381aeb?_0x309b82[_0x40cd1c(0x1f4)]:'';}async[_0x5bb0ec(0x1fb)](_0x3b89db,_0x1ca157,_0x48a543,_0x324593){const _0x56b585=_0x5bb0ec,{xml:_0x45dd72}=_0x48a543;console[_0x56b585(0x1a9)]('xml:\x20',_0x45dd72);if(_0x45dd72[_0x56b585(0x1ef)][0x0]==_0x56b585(0x1b2)){if(_0x45dd72[_0x56b585(0x1b2)][0x0]==_0x56b585(0x1f1)||_0x45dd72[_0x56b585(0x1b2)][0x0]==_0x56b585(0x1ec))return _0x324593[_0x56b585(0x1f9)](0xc8)[_0x56b585(0x1d4)]('');if(_0x45dd72['event'][0x0]==_0x56b585(0x1a6)){console['log']('扫码');const _0x371076=_0x45dd72[_0x56b585(0x1fc)][0x0];if(_0x371076['includes']('/')){this[_0x56b585(0x1eb)][_0x56b585(0x1d8)](_0x45dd72['fromusername'][0x0],_0x371076);const _0xa03886=await this[_0x56b585(0x1eb)]['genXmlMsgByConfig'](_0x45dd72,_0x56b585(0x1ed));return _0x324593['status'](0xc8)[_0x56b585(0x1d4)](_0xa03886);}this['officialService']['scan'](_0x45dd72['fromusername'][0x0],_0x371076);const _0x45af5f=await this[_0x56b585(0x1eb)][_0x56b585(0x204)](_0x45dd72,_0x56b585(0x1f8));return _0x324593['status'](0xc8)[_0x56b585(0x1d4)](_0x45af5f);}if(_0x45dd72[_0x56b585(0x1b2)][0x0]==_0x56b585(0x1bc)){console['log']('订阅',_0x45dd72['eventkey'][0x0]);const _0x2683cc=_0x45dd72[_0x56b585(0x1fc)][0x0][_0x56b585(0x1b0)]('qrscene_')[0x1];console['log'](_0x56b585(0x1a8),_0x2683cc);if(!_0x2683cc){const _0x4d8ce6=await this[_0x56b585(0x1eb)]['genXmlMsgByConfig'](_0x45dd72,_0x56b585(0x1b7));return _0x324593[_0x56b585(0x1f9)](0xc8)[_0x56b585(0x1d4)](_0x4d8ce6);}if(_0x2683cc['includes']('/')){this[_0x56b585(0x1eb)][_0x56b585(0x1d8)](_0x45dd72[_0x56b585(0x1d3)][0x0],_0x2683cc);const _0x376b62=await this[_0x56b585(0x1eb)][_0x56b585(0x204)](_0x45dd72,'officialBindAccountText');return _0x324593[_0x56b585(0x1f9)](0xc8)[_0x56b585(0x1d4)](_0x376b62);}this[_0x56b585(0x1eb)][_0x56b585(0x1ac)](_0x45dd72['fromusername'][0x0],_0x2683cc);const _0x288366=await this[_0x56b585(0x1eb)][_0x56b585(0x204)](_0x45dd72,'officialSubscribeText');return _0x324593[_0x56b585(0x1f9)](0xc8)['send'](_0x288366);}if(_0x45dd72[_0x56b585(0x1b2)][0x0]==_0x56b585(0x1cc))return _0x324593[_0x56b585(0x1f9)](0xc8)[_0x56b585(0x1d4)]('');}if(_0x45dd72['msgtype'][0x0]=='text'){console[_0x56b585(0x1a9)](_0x56b585(0x1a7));const _0x40c444=await this[_0x56b585(0x1eb)][_0x56b585(0x205)](_0x45dd72[_0x56b585(0x1b3)][0x0]),_0x137ad6=await this[_0x56b585(0x1eb)][_0x56b585(0x1e4)](_0x45dd72,_0x40c444);return _0x324593[_0x56b585(0x1f9)](0xc8)[_0x56b585(0x1d4)](_0x137ad6);}return _0x56b585(0x1be);}async['getQRSceneStr'](_0x5e90f4){return this['officialService']['getQRSceneStr'](_0x5e90f4);}async[_0x5bb0ec(0x1b5)](_0x477374){const _0x1276cc=_0x5bb0ec;return this[_0x1276cc(0x1eb)]['getQRSceneStrByBind'](_0x477374);}async[_0x5bb0ec(0x1d2)](_0x42ee6b){const _0x2a91b5=_0x5bb0ec,_0x1b9302=await this[_0x2a91b5(0x1eb)][_0x2a91b5(0x1c0)](_0x42ee6b['sceneStr']);return console['log'](_0x1b9302),_0x2a91b5(0x1d0)+encodeURIComponent(_0x1b9302);}async[_0x5bb0ec(0x1f3)](_0x7357fc,_0x5e7dcc){const _0x4a6b3c=_0x5bb0ec;return this['officialService'][_0x4a6b3c(0x1f3)](_0x7357fc,_0x5e7dcc[_0x4a6b3c(0x1c5)]);}async[_0x5bb0ec(0x1f5)](_0x59f732,_0x47d469){const _0x50c8c0=_0x5bb0ec;return this[_0x50c8c0(0x1eb)][_0x50c8c0(0x1f5)](_0x59f732,_0x47d469['sceneStr']);}async[_0x5bb0ec(0x200)](_0x4adf9d){const _0x12f292=_0x5bb0ec;return this[_0x12f292(0x1eb)][_0x12f292(0x200)](_0x4adf9d[_0x12f292(0x1a5)]);}async[_0x5bb0ec(0x1d9)](_0x21c6ce){const _0x73a3c=_0x5bb0ec;return this[_0x73a3c(0x1eb)][_0x73a3c(0x1d9)](_0x21c6ce[_0x73a3c(0x1a5)]);}async[_0x5bb0ec(0x1e6)](_0x208ad0,_0x552ad5){const _0x193f8a=_0x5bb0ec;return this[_0x193f8a(0x1eb)][_0x193f8a(0x1e6)](_0x208ad0,_0x552ad5[_0x193f8a(0x1c3)]);}};__decorate([(0x0,common_1[_0x5bb0ec(0x1ae)])(_0x5bb0ec(0x203)),(0x0,swagger_1[_0x5bb0ec(0x1ce)])({'summary':'公众号通知接口GET'}),__param(0x0,(0x0,common_1[_0x5bb0ec(0x1af)])()),__param(0x1,(0x0,common_1[_0x5bb0ec(0x1b4)])()),__param(0x2,(0x0,common_1['Body'])()),__metadata(_0x5bb0ec(0x1d6),Function),__metadata(_0x5bb0ec(0x1e3),[Object,Object,Object]),__metadata(_0x5bb0ec(0x1cf),Promise)],OfficialController[_0x5bb0ec(0x1bd)],_0x5bb0ec(0x203),null),__decorate([(0x0,common_1[_0x5bb0ec(0x201)])(_0x5bb0ec(0x203)),(0x0,swagger_1[_0x5bb0ec(0x1ce)])({'summary':_0x5bb0ec(0x1bf)}),__param(0x0,(0x0,common_1[_0x5bb0ec(0x1af)])()),__param(0x1,(0x0,common_1[_0x5bb0ec(0x1b4)])()),__param(0x2,(0x0,common_1[_0x5bb0ec(0x1aa)])()),__param(0x3,(0x0,common_1[_0x5bb0ec(0x1df)])()),__metadata(_0x5bb0ec(0x1d6),Function),__metadata('design:paramtypes',[Object,Object,Object,Object]),__metadata(_0x5bb0ec(0x1cf),Promise)],OfficialController[_0x5bb0ec(0x1bd)],_0x5bb0ec(0x1fb),null),__decorate([(0x0,common_1[_0x5bb0ec(0x201)])(_0x5bb0ec(0x1f2)),(0x0,swagger_1[_0x5bb0ec(0x1ce)])({'summary':_0x5bb0ec(0x1e8)}),__param(0x0,(0x0,common_1[_0x5bb0ec(0x1aa)])()),__metadata(_0x5bb0ec(0x1d6),Function),__metadata('design:paramtypes',[getQrSceneStr_dto_1[_0x5bb0ec(0x1ca)]]),__metadata(_0x5bb0ec(0x1cf),Promise)],OfficialController[_0x5bb0ec(0x1bd)],_0x5bb0ec(0x1f2),null),__decorate([(0x0,common_1[_0x5bb0ec(0x201)])(_0x5bb0ec(0x1b5)),(0x0,swagger_1[_0x5bb0ec(0x1ce)])({'summary':_0x5bb0ec(0x1c6)}),(0x0,common_1[_0x5bb0ec(0x1c2)])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1['Req'])()),__metadata(_0x5bb0ec(0x1d6),Function),__metadata(_0x5bb0ec(0x1e3),[Object]),__metadata(_0x5bb0ec(0x1cf),Promise)],OfficialController['prototype'],_0x5bb0ec(0x1b5),null),__decorate([(0x0,common_1[_0x5bb0ec(0x1ae)])(_0x5bb0ec(0x1d2)),(0x0,swagger_1['ApiOperation'])({'summary':'获取二维码'}),__param(0x0,(0x0,common_1['Query'])()),__metadata(_0x5bb0ec(0x1d6),Function),__metadata(_0x5bb0ec(0x1e3),[getQrCode_dto_1[_0x5bb0ec(0x1e7)]]),__metadata(_0x5bb0ec(0x1cf),Promise)],OfficialController[_0x5bb0ec(0x1bd)],_0x5bb0ec(0x1d2),null),__decorate([(0x0,common_1[_0x5bb0ec(0x201)])(_0x5bb0ec(0x1f3)),(0x0,swagger_1[_0x5bb0ec(0x1ce)])({'summary':'扫码登录轮询查询'}),__param(0x0,(0x0,common_1[_0x5bb0ec(0x1af)])()),__param(0x1,(0x0,common_1[_0x5bb0ec(0x1aa)])()),__metadata(_0x5bb0ec(0x1d6),Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0x5bb0ec(0x1e7)]]),__metadata(_0x5bb0ec(0x1cf),Promise)],OfficialController[_0x5bb0ec(0x1bd)],_0x5bb0ec(0x1f3),null),__decorate([(0x0,common_1[_0x5bb0ec(0x201)])(_0x5bb0ec(0x1f5)),(0x0,swagger_1['ApiOperation'])({'summary':_0x5bb0ec(0x1e5)}),(0x0,common_1[_0x5bb0ec(0x1c2)])(jwtAuth_guard_1[_0x5bb0ec(0x1bb)]),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x5bb0ec(0x1aa)])()),__metadata(_0x5bb0ec(0x1d6),Function),__metadata(_0x5bb0ec(0x1e3),[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata('design:returntype',Promise)],OfficialController[_0x5bb0ec(0x1bd)],_0x5bb0ec(0x1f5),null),__decorate([(0x0,common_1['Post'])(_0x5bb0ec(0x200)),(0x0,swagger_1[_0x5bb0ec(0x1ce)])({'summary':_0x5bb0ec(0x1ad)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x5bb0ec(0x1d6),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],OfficialController[_0x5bb0ec(0x1bd)],'getRedirectUrl',null),__decorate([(0x0,common_1['Post'])('getJsapiTicket'),(0x0,swagger_1['ApiOperation'])({'summary':_0x5bb0ec(0x1d1)}),__param(0x0,(0x0,common_1[_0x5bb0ec(0x1aa)])()),__metadata(_0x5bb0ec(0x1d6),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],OfficialController[_0x5bb0ec(0x1bd)],_0x5bb0ec(0x1d9),null),__decorate([(0x0,common_1['Post'])('loginByCode'),(0x0,swagger_1[_0x5bb0ec(0x1ce)])({'summary':_0x5bb0ec(0x1cb)}),__param(0x0,(0x0,common_1[_0x5bb0ec(0x1af)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata(_0x5bb0ec(0x1d6),Function),__metadata(_0x5bb0ec(0x1e3),[Object,Object]),__metadata(_0x5bb0ec(0x1cf),Promise)],OfficialController[_0x5bb0ec(0x1bd)],_0x5bb0ec(0x1e6),null),OfficialController=__decorate([(0x0,swagger_1[_0x5bb0ec(0x1c4)])(_0x5bb0ec(0x1db)),(0x0,common_1[_0x5bb0ec(0x1c9)])(_0x5bb0ec(0x1db)),__metadata(_0x5bb0ec(0x1e3),[official_service_1[_0x5bb0ec(0x1f7)]])],OfficialController),exports[_0x5bb0ec(0x1ff)]=OfficialController;