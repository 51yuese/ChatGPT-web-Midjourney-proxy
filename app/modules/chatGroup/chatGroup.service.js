'use strict';const _0x41b6e7=_0xe1db;(function(_0x3e999d,_0x12ae5d){const _0x45aafa=_0xe1db,_0x1ca456=_0x3e999d();while(!![]){try{const _0x440c16=parseInt(_0x45aafa(0x1ab))/0x1*(-parseInt(_0x45aafa(0x177))/0x2)+-parseInt(_0x45aafa(0x19e))/0x3*(-parseInt(_0x45aafa(0x192))/0x4)+parseInt(_0x45aafa(0x18c))/0x5*(-parseInt(_0x45aafa(0x19c))/0x6)+parseInt(_0x45aafa(0x187))/0x7*(parseInt(_0x45aafa(0x1a6))/0x8)+parseInt(_0x45aafa(0x1ad))/0x9*(parseInt(_0x45aafa(0x1a0))/0xa)+-parseInt(_0x45aafa(0x197))/0xb*(-parseInt(_0x45aafa(0x1a5))/0xc)+-parseInt(_0x45aafa(0x174))/0xd;if(_0x440c16===_0x12ae5d)break;else _0x1ca456['push'](_0x1ca456['shift']());}catch(_0x31b2f5){_0x1ca456['push'](_0x1ca456['shift']());}}}(_0x594b,0xda19c));var __decorate=this&&this['__decorate']||function(_0x347c40,_0x3dc0be,_0xacd193,_0x644166){const _0x21dd33=_0xe1db;var _0x2000c3=arguments[_0x21dd33(0x18d)],_0x1a1cf8=_0x2000c3<0x3?_0x3dc0be:_0x644166===null?_0x644166=Object['getOwnPropertyDescriptor'](_0x3dc0be,_0xacd193):_0x644166,_0x383841;if(typeof Reflect==='object'&&typeof Reflect[_0x21dd33(0x170)]===_0x21dd33(0x18b))_0x1a1cf8=Reflect[_0x21dd33(0x170)](_0x347c40,_0x3dc0be,_0xacd193,_0x644166);else{for(var _0x4764da=_0x347c40[_0x21dd33(0x18d)]-0x1;_0x4764da>=0x0;_0x4764da--)if(_0x383841=_0x347c40[_0x4764da])_0x1a1cf8=(_0x2000c3<0x3?_0x383841(_0x1a1cf8):_0x2000c3>0x3?_0x383841(_0x3dc0be,_0xacd193,_0x1a1cf8):_0x383841(_0x3dc0be,_0xacd193))||_0x1a1cf8;}return _0x2000c3>0x3&&_0x1a1cf8&&Object[_0x21dd33(0x199)](_0x3dc0be,_0xacd193,_0x1a1cf8),_0x1a1cf8;},__metadata=this&&this['__metadata']||function(_0x537330,_0x315cd1){const _0x1200be=_0xe1db;if(typeof Reflect===_0x1200be(0x190)&&typeof Reflect[_0x1200be(0x179)]==='function')return Reflect['metadata'](_0x537330,_0x315cd1);},__param=this&&this[_0x41b6e7(0x185)]||function(_0x1d33ab,_0x10d72a){return function(_0x366072,_0x5a4e8b){_0x10d72a(_0x366072,_0x5a4e8b,_0x1d33ab);};};Object['defineProperty'](exports,_0x41b6e7(0x17d),{'value':!![]}),exports['ChatGroupService']=void 0x0;const common_1=require(_0x41b6e7(0x16c)),chatGroup_entity_1=require(_0x41b6e7(0x1aa)),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require('typeorm'),app_entity_1=require(_0x41b6e7(0x184)),models_service_1=require(_0x41b6e7(0x175)),model_constant_1=require('../../common/constants/model.constant');function _0xe1db(_0x1580a8,_0x2d6bf2){const _0x594bbb=_0x594b();return _0xe1db=function(_0xe1db46,_0x3d27e8){_0xe1db46=_0xe1db46-0x16b;let _0x4ad38a=_0x594bbb[_0xe1db46];return _0x4ad38a;},_0xe1db(_0x1580a8,_0x2d6bf2);}let ChatGroupService=class ChatGroupService{constructor(_0x4130ae,_0x464884,_0x5deb7f){const _0x236b3c=_0x41b6e7;this[_0x236b3c(0x18e)]=_0x4130ae,this[_0x236b3c(0x1a2)]=_0x464884,this['modelsService']=_0x5deb7f;}async[_0x41b6e7(0x1a1)](_0xb85c5d,_0x209661){const _0xd10c99=_0x41b6e7;let _0xbd87a4;const {id:_0x5ea825}=_0x209661['user'],{modelType:_0x31e10c}=_0xb85c5d,_0x253436={'title':_0xd10c99(0x18a),'userId':_0x5ea825,'modelType':_0x31e10c,'config':''};if(_0x31e10c==='music'){const _0x4cfa0f=await this[_0xd10c99(0x17e)]['getModelByType'](model_constant_1['EModelType'][_0xd10c99(0x17b)]);_0x253436[_0xd10c99(0x16f)]=JSON[_0xd10c99(0x176)](_0x4cfa0f);}else{const _0x2c4357=await this[_0xd10c99(0x17e)][_0xd10c99(0x1b2)](model_constant_1[_0xd10c99(0x1a7)][_0xd10c99(0x19d)]);_0x253436[_0xd10c99(0x16f)]=JSON['stringify'](_0x2c4357);}const _0x1834c4=await this[_0xd10c99(0x18e)][_0xd10c99(0x189)](_0x253436);return _0xbd87a4&&(_0xbd87a4['heat']=_0xbd87a4[_0xd10c99(0x17f)]+Math[_0xd10c99(0x172)](Math[_0xd10c99(0x16d)]()*0xa),await this[_0xd10c99(0x1a2)][_0xd10c99(0x189)](_0xbd87a4)),_0x1834c4;}async[_0x41b6e7(0x19b)](_0x70917a,_0x40041e){const _0x5855ca=_0x41b6e7;try{const {id:_0xb71661}=_0x40041e[_0x5855ca(0x17c)],_0x3579a5={'userId':_0xb71661,'isDelete':![]};return _0x70917a?_0x3579a5[_0x5855ca(0x19a)]=_0x70917a:_0x3579a5[_0x5855ca(0x19a)]=(0x0,typeorm_2[_0x5855ca(0x1a3)])(),await this[_0x5855ca(0x18e)][_0x5855ca(0x1a4)]({'where':_0x3579a5,'order':{'isSticky':_0x5855ca(0x194),'id':_0x5855ca(0x194)}});}catch(_0x5a03b8){console[_0x5855ca(0x1b1)](_0x5855ca(0x178),_0x5a03b8);}}async[_0x41b6e7(0x198)](_0x55cb16,_0x1bfc20){const _0x5b754e=_0x41b6e7,{title:_0x18c27c,isSticky:_0x26307e,groupId:_0x1ac2e0,config:_0x8cdfa1,appType:_0x22cb84}=_0x55cb16,{id:_0x37646c}=_0x1bfc20[_0x5b754e(0x17c)],_0x1ca2ec=await this[_0x5b754e(0x18e)][_0x5b754e(0x196)]({'where':{'id':_0x1ac2e0,'userId':_0x37646c}});if(!_0x1ca2ec)throw new common_1[(_0x5b754e(0x19f))](_0x5b754e(0x1ae),common_1[_0x5b754e(0x182)][_0x5b754e(0x181)]);const _0x3a2d5c={};_0x18c27c&&(_0x3a2d5c[_0x5b754e(0x17a)]=_0x18c27c),typeof _0x26307e!==_0x5b754e(0x183)&&(_0x3a2d5c['isSticky']=_0x26307e),_0x8cdfa1&&(_0x3a2d5c[_0x5b754e(0x16f)]=_0x8cdfa1);const _0x5d95ad=await this[_0x5b754e(0x18e)][_0x5b754e(0x198)]({'id':_0x1ac2e0},_0x3a2d5c);if(_0x5d95ad[_0x5b754e(0x1a8)])return!![];else throw new common_1['HttpException'](_0x5b754e(0x191),common_1[_0x5b754e(0x182)][_0x5b754e(0x181)]);}async[_0x41b6e7(0x1b0)](_0x588222,_0x2cadd5){const _0x5a8d0b=_0x41b6e7,{groupId:_0x2e1ec7}=_0x588222,{id:_0x1d69ae}=_0x2cadd5[_0x5a8d0b(0x17c)],_0x268224=await this[_0x5a8d0b(0x18e)][_0x5a8d0b(0x196)]({'where':{'id':_0x2e1ec7,'userId':_0x1d69ae}});if(!_0x268224)throw new common_1['HttpException'](_0x5a8d0b(0x180),common_1[_0x5a8d0b(0x182)]['BAD_REQUEST']);const _0x5ca7d6=await this[_0x5a8d0b(0x18e)][_0x5a8d0b(0x198)]({'id':_0x2e1ec7},{'isDelete':!![]});if(_0x5ca7d6[_0x5a8d0b(0x1a8)])return _0x5a8d0b(0x193);else throw new common_1['HttpException'](_0x5a8d0b(0x16e),common_1[_0x5a8d0b(0x182)][_0x5a8d0b(0x181)]);}async[_0x41b6e7(0x186)](_0x5cccd7){const _0x47b1f2=_0x41b6e7,{id:_0x4bb53e}=_0x5cccd7['user'],_0x4442ed=await this['chatGroupEntity'][_0x47b1f2(0x198)]({'userId':_0x4bb53e,'isSticky':![],'isDelete':![]},{'isDelete':!![]});if(_0x4442ed[_0x47b1f2(0x1a8)])return _0x47b1f2(0x193);else throw new common_1[(_0x47b1f2(0x19f))](_0x47b1f2(0x16e),common_1[_0x47b1f2(0x182)]['BAD_REQUEST']);}async[_0x41b6e7(0x18f)](_0x107e79){const _0x30855f=_0x41b6e7;if(!_0x107e79||_0x107e79===0x0)return null;return await this[_0x30855f(0x18e)][_0x30855f(0x196)]({'where':{'id':_0x107e79}});}};function _0x594b(){const _0x1926be=['6614252LzejGT','删除成功','DESC','Repository','findOne','4295401lAhdhu','update','defineProperty','modelType','query','54XMhdiI','CHAT','3xDjqWP','HttpException','19420ZryqbT','create','appEntity','IsNull','find','48ebBYGF','120xPnTpd','EModelType','affected','ModelsService','./chatGroup.entity','350603EwESwm','ChatGroupService','5742ujRJLu','对话组编号和用户编号不匹配，请登录之后创建新的对话！','design:paramtypes','del','log','getModelByType','AppEntity','@nestjs/common','random','删除失败！','config','decorate','ChatGroupEntity','ceil','InjectRepository','35841624MQFtVf','../models/models.service','stringify','6jQeowd','error:\x20','metadata','title','MUSIC','user','__esModule','modelsService','heat','非法操作、您在删除一个非法资源！','BAD_REQUEST','HttpStatus','undefined','../app/app.entity','__param','delAll','258545TSlNZG','Injectable','save','新对话','function','170195mUXBhl','length','chatGroupEntity','getGroupInfoFromId','object','更新对话失败！'];_0x594b=function(){return _0x1926be;};return _0x594b();}ChatGroupService=__decorate([(0x0,common_1[_0x41b6e7(0x188)])(),__param(0x0,(0x0,typeorm_1[_0x41b6e7(0x173)])(chatGroup_entity_1[_0x41b6e7(0x171)])),__param(0x1,(0x0,typeorm_1[_0x41b6e7(0x173)])(app_entity_1[_0x41b6e7(0x16b)])),__metadata(_0x41b6e7(0x1af),[typeorm_2['Repository'],typeorm_2[_0x41b6e7(0x195)],models_service_1[_0x41b6e7(0x1a9)]])],ChatGroupService),exports[_0x41b6e7(0x1ac)]=ChatGroupService;