'use strict';const _0x4e0f9e=_0x2175;(function(_0x3e84a9,_0x2b3191){const _0x138358=_0x2175,_0x27e204=_0x3e84a9();while(!![]){try{const _0x1de0d1=-parseInt(_0x138358(0x1f6))/0x1+parseInt(_0x138358(0x202))/0x2*(-parseInt(_0x138358(0x20a))/0x3)+parseInt(_0x138358(0x205))/0x4*(parseInt(_0x138358(0x1fc))/0x5)+parseInt(_0x138358(0x1f2))/0x6+-parseInt(_0x138358(0x201))/0x7*(parseInt(_0x138358(0x20c))/0x8)+-parseInt(_0x138358(0x1e4))/0x9+parseInt(_0x138358(0x1f8))/0xa;if(_0x1de0d1===_0x2b3191)break;else _0x27e204['push'](_0x27e204['shift']());}catch(_0x4a8a45){_0x27e204['push'](_0x27e204['shift']());}}}(_0x2b52,0xa2a44));var __decorate=this&&this['__decorate']||function(_0x3969ce,_0x3bec19,_0x12666c,_0x5d6db2){const _0x3212a1=_0x2175;var _0xb496e0=arguments[_0x3212a1(0x1ee)],_0xe87ee5=_0xb496e0<0x3?_0x3bec19:_0x5d6db2===null?_0x5d6db2=Object['getOwnPropertyDescriptor'](_0x3bec19,_0x12666c):_0x5d6db2,_0x4e7eca;if(typeof Reflect===_0x3212a1(0x1e3)&&typeof Reflect[_0x3212a1(0x1f4)]===_0x3212a1(0x1fb))_0xe87ee5=Reflect[_0x3212a1(0x1f4)](_0x3969ce,_0x3bec19,_0x12666c,_0x5d6db2);else{for(var _0x349091=_0x3969ce[_0x3212a1(0x1ee)]-0x1;_0x349091>=0x0;_0x349091--)if(_0x4e7eca=_0x3969ce[_0x349091])_0xe87ee5=(_0xb496e0<0x3?_0x4e7eca(_0xe87ee5):_0xb496e0>0x3?_0x4e7eca(_0x3bec19,_0x12666c,_0xe87ee5):_0x4e7eca(_0x3bec19,_0x12666c))||_0xe87ee5;}return _0xb496e0>0x3&&_0xe87ee5&&Object['defineProperty'](_0x3bec19,_0x12666c,_0xe87ee5),_0xe87ee5;},__metadata=this&&this[_0x4e0f9e(0x200)]||function(_0x186c8d,_0x25d293){const _0xf29ddb=_0x4e0f9e;if(typeof Reflect===_0xf29ddb(0x1e3)&&typeof Reflect[_0xf29ddb(0x1f9)]===_0xf29ddb(0x1fb))return Reflect['metadata'](_0x186c8d,_0x25d293);},__param=this&&this[_0x4e0f9e(0x1fd)]||function(_0x228f8b,_0x3f8bd3){return function(_0x5ad638,_0x3d0f85){_0x3f8bd3(_0x5ad638,_0x3d0f85,_0x228f8b);};};Object[_0x4e0f9e(0x1ed)](exports,_0x4e0f9e(0x1e5),{'value':!![]}),exports[_0x4e0f9e(0x1e7)]=void 0x0;const common_1=require('@nestjs/common');function _0x2175(_0x32f584,_0xe9f68f){const _0x2b521d=_0x2b52();return _0x2175=function(_0x217506,_0x29fc2c){_0x217506=_0x217506-0x1e3;let _0x1b49d1=_0x2b521d[_0x217506];return _0x1b49d1;},_0x2175(_0x32f584,_0xe9f68f);}function _0x2b52(){const _0x3aa377=['decorate','expire','127392GGFkyh','token:','20134380axuKRw','metadata','tokens:','function','414980VQFLau','__param','visitor','BAD_REQUEST','__metadata','91RgTgrh','1879230srZfIL','forEach','HttpStatus','16ADVKcj','set','redisClient','onModuleInit','get','3tLqobb','checkTokenAuth','343016aswKza','del','admin','object','5623272TvDLPX','__esModule','Inject','RedisCacheService','HttpException','invalidateTokens','user','includes','UNAUTHORIZED','defineProperty','length','manager','REDIS_CLIENT','super','3419844PmNtVo','ttl'];_0x2b52=function(){return _0x3aa377;};return _0x2b52();}let RedisCacheService=class RedisCacheService{constructor(_0x469468){const _0x2fe6a1=_0x4e0f9e;this[_0x2fe6a1(0x207)]=_0x469468;}async[_0x4e0f9e(0x208)](){}async[_0x4e0f9e(0x209)](_0x12c0d3){const _0x55ac6e=_0x4e0f9e,{key:_0x459bcc}=_0x12c0d3;return await this[_0x55ac6e(0x207)][_0x55ac6e(0x209)](_0x459bcc);}async[_0x4e0f9e(0x206)](_0x12fac9,_0xa861a4){const _0x26079a=_0x4e0f9e;try{const {key:_0x1b9992,val:_0x11af08}=_0x12fac9;await this[_0x26079a(0x207)][_0x26079a(0x206)](_0x1b9992,_0x11af08),_0xa861a4&&await this[_0x26079a(0x207)][_0x26079a(0x1f5)](_0x1b9992,_0xa861a4);return;}catch(_0x5a536d){throw new common_1[(_0x26079a(0x1e8))](_0x5a536d,common_1[_0x26079a(0x204)][_0x26079a(0x1ff)]);}}async[_0x4e0f9e(0x1f3)](_0x4c8439){const _0x5952f9=_0x4e0f9e;return await this[_0x5952f9(0x207)][_0x5952f9(0x1f3)](_0x4c8439);}async[_0x4e0f9e(0x20d)](_0xd2095b){const _0x535b3b=_0x4e0f9e,{key:_0x374da9}=_0xd2095b;return await this[_0x535b3b(0x207)][_0x535b3b(0x20d)](_0x374da9);}async['saveToken'](_0xdc25c4,_0x908d18){const _0x17f31c=_0x4e0f9e,_0x19898c=await this[_0x17f31c(0x207)]['zRange'](_0x17f31c(0x1fa)+_0xdc25c4,0x0,-0x1);await this[_0x17f31c(0x1e9)](_0xdc25c4,_0x19898c),await this[_0x17f31c(0x207)][_0x17f31c(0x206)](_0x17f31c(0x1f7)+_0xdc25c4,_0x908d18);}async[_0x4e0f9e(0x1e9)](_0x50e176,_0x4363d2){const _0x3d428e=_0x4e0f9e;_0x4363d2[_0x3d428e(0x203)](_0x246e85=>{const _0x165a3b=_0x3d428e;this[_0x165a3b(0x207)]['del']('token:'+_0x50e176+':'+_0x246e85);});}async[_0x4e0f9e(0x20b)](_0xdeb586,_0x40251e){const _0x460209=_0x4e0f9e,{id:_0x2d9446,role:_0x53d643}=_0x40251e[_0x460209(0x1ea)];if(_0x53d643===_0x460209(0x1fe))return!![];const _0x5ce71f=await this[_0x460209(0x207)][_0x460209(0x209)](_0x460209(0x1f7)+_0x2d9446);if(_0x5ce71f===null)return await this[_0x460209(0x207)]['set']('token:'+_0x2d9446,_0xdeb586),!![];if(_0x5ce71f!==_0xdeb586){if([_0x460209(0x1f1),_0x460209(0x20e),_0x460209(0x1ef)][_0x460209(0x1eb)](_0x53d643))return!![];throw new common_1['HttpException']('您已在其他设备覆盖登录、请您重新登录！',common_1[_0x460209(0x204)][_0x460209(0x1ec)]);}}};RedisCacheService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,common_1[_0x4e0f9e(0x1e6)])(_0x4e0f9e(0x1f0))),__metadata('design:paramtypes',[Object])],RedisCacheService),exports[_0x4e0f9e(0x1e7)]=RedisCacheService;