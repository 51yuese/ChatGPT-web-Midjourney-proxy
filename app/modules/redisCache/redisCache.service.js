'use strict';const _0x15a1de=_0x5f45;(function(_0x3f1e51,_0x566edd){const _0x4a749c=_0x5f45,_0x148399=_0x3f1e51();while(!![]){try{const _0x408825=parseInt(_0x4a749c(0x121))/0x1+-parseInt(_0x4a749c(0x104))/0x2+parseInt(_0x4a749c(0x11e))/0x3*(-parseInt(_0x4a749c(0x119))/0x4)+-parseInt(_0x4a749c(0x111))/0x5*(-parseInt(_0x4a749c(0x132))/0x6)+-parseInt(_0x4a749c(0x122))/0x7+-parseInt(_0x4a749c(0x126))/0x8*(parseInt(_0x4a749c(0x12c))/0x9)+parseInt(_0x4a749c(0x130))/0xa;if(_0x408825===_0x566edd)break;else _0x148399['push'](_0x148399['shift']());}catch(_0x50dd31){_0x148399['push'](_0x148399['shift']());}}}(_0x3e3e,0x304f8));var __decorate=this&&this[_0x15a1de(0x116)]||function(_0x2a050b,_0x213ccc,_0x2d0218,_0xa87d47){const _0x11ad1f=_0x15a1de;var _0x3c016b=arguments[_0x11ad1f(0x112)],_0x451e84=_0x3c016b<0x3?_0x213ccc:_0xa87d47===null?_0xa87d47=Object[_0x11ad1f(0x10e)](_0x213ccc,_0x2d0218):_0xa87d47,_0x595a03;if(typeof Reflect===_0x11ad1f(0x123)&&typeof Reflect[_0x11ad1f(0x11d)]==='function')_0x451e84=Reflect[_0x11ad1f(0x11d)](_0x2a050b,_0x213ccc,_0x2d0218,_0xa87d47);else{for(var _0x207347=_0x2a050b[_0x11ad1f(0x112)]-0x1;_0x207347>=0x0;_0x207347--)if(_0x595a03=_0x2a050b[_0x207347])_0x451e84=(_0x3c016b<0x3?_0x595a03(_0x451e84):_0x3c016b>0x3?_0x595a03(_0x213ccc,_0x2d0218,_0x451e84):_0x595a03(_0x213ccc,_0x2d0218))||_0x451e84;}return _0x3c016b>0x3&&_0x451e84&&Object[_0x11ad1f(0x109)](_0x213ccc,_0x2d0218,_0x451e84),_0x451e84;},__metadata=this&&this[_0x15a1de(0x113)]||function(_0x23e638,_0x20372e){const _0x21f054=_0x15a1de;if(typeof Reflect===_0x21f054(0x123)&&typeof Reflect[_0x21f054(0x10f)]===_0x21f054(0x105))return Reflect[_0x21f054(0x10f)](_0x23e638,_0x20372e);},__param=this&&this[_0x15a1de(0x12f)]||function(_0x4dc22b,_0x5ea32f){return function(_0xb8b6c4,_0x54af92){_0x5ea32f(_0xb8b6c4,_0x54af92,_0x4dc22b);};};Object[_0x15a1de(0x109)](exports,_0x15a1de(0x129),{'value':!![]}),exports[_0x15a1de(0x125)]=void 0x0;function _0x3e3e(){const _0x3ab8af=['design:paramtypes','__param','7261880qRCOHx','您已在其他设备覆盖登录、请您重新登录！','60MRDDWl','599114iFsNNn','function','includes','admin','invalidateTokens','defineProperty','HttpStatus','Inject','redisClient','del','getOwnPropertyDescriptor','metadata','HttpException','46390LyjbKp','length','__metadata','tokens:','get','__decorate','@nestjs/common','checkTokenAuth','1684YSXZmX','manager','ttl','zRange','decorate','1983yUcRdi','token:','set','109400piqCJf','56959cQFOYs','object','test','RedisCacheService','1156104raxQDw','Injectable','super','__esModule','BAD_REQUEST','user','9yDKwhH','REDIS_CLIENT'];_0x3e3e=function(){return _0x3ab8af;};return _0x3e3e();}const common_1=require(_0x15a1de(0x117));let RedisCacheService=class RedisCacheService{constructor(_0x4ca559){const _0x2a08c8=_0x15a1de;this[_0x2a08c8(0x10c)]=_0x4ca559;}async['onModuleInit'](){}[_0x15a1de(0x124)](){const _0x290bb0=_0x15a1de;return this[_0x290bb0(0x10c)][_0x290bb0(0x120)]('aaa',0x6f),0x1;}async[_0x15a1de(0x115)](_0x298019){const _0x62b5a3=_0x15a1de,{key:_0x2f7d06}=_0x298019,_0x2bfbcc=await this[_0x62b5a3(0x10c)][_0x62b5a3(0x115)](_0x2f7d06);return await this['redisClient']['get'](_0x2f7d06);}async[_0x15a1de(0x120)](_0x47b177,_0xf7b8f9){const _0x475f56=_0x15a1de;try{const {key:_0x31c1da,val:_0x3f65f4}=_0x47b177;await this[_0x475f56(0x10c)][_0x475f56(0x120)](_0x31c1da,_0x3f65f4),_0xf7b8f9&&await this[_0x475f56(0x10c)]['expire'](_0x31c1da,_0xf7b8f9);return;}catch(_0x454a64){throw new common_1[(_0x475f56(0x110))](_0x454a64,common_1[_0x475f56(0x10a)][_0x475f56(0x12a)]);}}async[_0x15a1de(0x11b)](_0x581df7){const _0x3a84a7=_0x15a1de;return await this['redisClient'][_0x3a84a7(0x11b)](_0x581df7);}async[_0x15a1de(0x10d)](_0x52cd15){const _0x5cc043=_0x15a1de,{key:_0x12829c}=_0x52cd15;await this[_0x5cc043(0x10c)][_0x5cc043(0x10d)](_0x12829c);return;}async['saveToken'](_0xdf8ca3,_0x581c2d){const _0x101b37=_0x15a1de,_0x124761=await this[_0x101b37(0x10c)][_0x101b37(0x11c)](_0x101b37(0x114)+_0xdf8ca3,0x0,-0x1);await this[_0x101b37(0x108)](_0xdf8ca3,_0x124761),this['redisClient'][_0x101b37(0x120)](_0x101b37(0x11f)+_0xdf8ca3,_0x581c2d);}async['invalidateTokens'](_0x24cb46,_0x4ec638){_0x4ec638['forEach'](_0x2a9894=>{const _0x1a4869=_0x5f45;this[_0x1a4869(0x10c)]['del'](_0x1a4869(0x11f)+_0x24cb46+':'+_0x2a9894);});}async[_0x15a1de(0x118)](_0x56dbbe,_0x42adc5){const _0x5c61b3=_0x15a1de,{id:_0x24ee5c,role:_0xaaefd}=_0x42adc5[_0x5c61b3(0x12b)];if(_0xaaefd==='visitor')return!![];const _0x3c00b5=await this[_0x5c61b3(0x10c)][_0x5c61b3(0x115)](_0x5c61b3(0x11f)+_0x24ee5c);if(_0x3c00b5===null)return await this['redisClient'][_0x5c61b3(0x120)](_0x5c61b3(0x11f)+_0x24ee5c,_0x56dbbe),!![];if(_0x3c00b5!==_0x56dbbe){if([_0x5c61b3(0x128),_0x5c61b3(0x107),_0x5c61b3(0x11a)][_0x5c61b3(0x106)](_0xaaefd))return!![];throw new common_1[(_0x5c61b3(0x110))](_0x5c61b3(0x131),common_1[_0x5c61b3(0x10a)]['UNAUTHORIZED']);}}};function _0x5f45(_0x3c44c8,_0x35097a){const _0x3e3e3b=_0x3e3e();return _0x5f45=function(_0x5f45ee,_0x58e789){_0x5f45ee=_0x5f45ee-0x104;let _0x1112b1=_0x3e3e3b[_0x5f45ee];return _0x1112b1;},_0x5f45(_0x3c44c8,_0x35097a);}RedisCacheService=__decorate([(0x0,common_1[_0x15a1de(0x127)])(),__param(0x0,(0x0,common_1[_0x15a1de(0x10b)])(_0x15a1de(0x12d))),__metadata(_0x15a1de(0x12e),[Object])],RedisCacheService),exports['RedisCacheService']=RedisCacheService;