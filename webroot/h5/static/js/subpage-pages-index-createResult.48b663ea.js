(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subpage-pages-index-createResult"],{"1b56":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".inotegral_box[data-v-0f798379]{width:100vw;background-color:#0b0c17}.tabbar[data-v-0f798379]{width:100%;height:%?150?%;color:#fff;display:flex;align-items:flex-end;padding-bottom:%?10?%;font-size:%?35?%;padding:0 %?40?% 0 %?20?%;position:-webkit-sticky;position:sticky;top:0;z-index:1;background-color:#0c0c16}.createResult_main[data-v-0f798379]{width:100%;height:100%;z-index:0;background-color:#0c0c16;position:relative}.createResult_main uni-scroll-view[data-v-0f798379]{width:100%;padding:%?40?% %?40?% %?100?% %?40?%}.createResult_main uni-scroll-view .image_card[data-v-0f798379]{width:100%;border-radius:20px;min-height:50vh}.createResult_main uni-scroll-view .image_card uni-image[data-v-0f798379]{width:100%}.createResult_main uni-scroll-view .text_card[data-v-0f798379]{border:%?2?% solid #262643;margin-top:%?60?%;padding:%?40?% %?40?% %?40?% %?40?%}.createResult_main uni-scroll-view .text_card .title_card[data-v-0f798379]{width:100%;display:flex;font-size:%?28?%;align-items:center;justify-content:space-between;border-bottom:%?2?% solid #262643;padding-bottom:%?40?%}.createResult_main .bottom_tabber[data-v-0f798379]{width:100%;height:%?120?%;padding:0 %?40?% %?20?% %?40?%;position:fixed;bottom:0;display:flex;justify-content:space-between;align-items:center;font-size:%?20?%;background-color:#17161b}.createResult_main .bottom_tabber .left[data-v-0f798379]{display:flex;color:#999}.createResult_main .bottom_tabber .right[data-v-0f798379]{display:flex}.createResult_main .bottom_tabber .right uni-button[data-v-0f798379]{border-radius:%?50?%;width:%?200?%}.moreBox[data-v-0f798379]{background-color:#17161b;width:100%;padding:%?20?% %?30?% %?64?% %?30?%}.moreBox .topTitle[data-v-0f798379]{display:flex;justify-content:space-between;padding-bottom:%?12?%}.moreBox .topTitle .topMoreLeft[data-v-0f798379]{width:%?10?%;height:%?10?%}.moreBox .topTitle .moreTitle[data-v-0f798379]{color:#fff;font-size:%?36?%;text-align:center}.moreBox .topTitle .topMoreRight[data-v-0f798379]{display:flex;align-items:center}.moreBox .adjust[data-v-0f798379]{display:flex;margin-top:%?34?%}.moreBox .adjust .adjustLeft[data-v-0f798379]{display:flex;align-items:center}.moreBox .adjust .adjustLeft .title[data-v-0f798379]{font-size:%?30?%;color:#fff}.moreBox .adjust .adjustLeft .important[data-v-0f798379]{color:#fff;border:%?2?% solid #fff;width:%?28?%;height:%?28?%;border-radius:50%;text-align:center;line-height:%?28?%;font-size:%?24?%}.moreBox .adjust .adjustRight[data-v-0f798379]{display:flex;margin-left:%?26?%}.moreBox .adjust .adjustRight .adjustItem[data-v-0f798379]{width:%?134?%;height:%?40?%;border:%?2?% solid #fff;color:#fff;font-size:%?24?%;margin-left:%?20?%;text-align:center;line-height:%?40?%;border-radius:%?5?%}.moreBox .adjust .adjustRight .adjustItem1[data-v-0f798379]{width:%?60?%;height:%?40?%;border:%?2?% solid #fff;color:#fff;font-size:%?24?%;margin-left:%?20?%;border-radius:%?5?%;display:flex;justify-content:center;align-items:center}.moreBox .adjust .adjustRight .adjustItem1 .imgBox[data-v-0f798379]{width:%?32?%;height:%?32?%}.moreBox .adjust .adjustRight .adjustItem1 .imgBox .img[data-v-0f798379]{width:100%;height:100%}.moreBox .bottomTitle[data-v-0f798379]{display:flex;justify-content:space-between;margin-top:%?42?%}.moreBox .bottomTitle .left[data-v-0f798379]{color:#fff;font-size:%?26?%}.moreBox .bottomTitle .right[data-v-0f798379]{color:#999;font-size:%?24?%}.actionBox[data-v-0f798379]{display:flex;flex-wrap:wrap;flex-shrink:1}.actionBox .actionItem[data-v-0f798379]{width:%?210?%;height:%?40?%;color:#fff;font-size:%?24?%;display:flex;justify-content:center;align-items:center;border:%?2?% solid #fff;margin-top:%?34?%;border-radius:%?5?%;margin-left:%?20?%}.line[data-v-0f798379]{position:absolute;z-index:1;left:50%;top:30%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;padding:0 %?30?%;width:100%}.line .u-line-progress[data-v-0f798379]{width:%?500?%;margin-top:%?20?%}.image[data-v-0f798379]{width:100%;height:100%;z-index:0}.complete_image[data-v-0f798379]{width:100%;height:100%;z-index:0}.publishBox[data-v-0f798379]{padding:%?30?%}.publishBox .selectIntro[data-v-0f798379]{font-size:%?36?%;text-align:center}.publishBox .squareType[data-v-0f798379]{font-size:%?32?%;padding-left:%?30?%}.publishBox .selectList[data-v-0f798379]{padding-left:%?30?%;margin-top:%?20?%}.publishBox .selectList .selectItem[data-v-0f798379]{font-size:%?30?%;border-bottom:%?2?% solid #d9d9da;padding:%?20?% 0}",""]),t.exports=e},"25ea":function(t,e,i){"use strict";i("7a82");var a=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("f07e")),o=a(i("c964")),s=a(i("d0ff"));i("4de4"),i("d3b7"),i("99af"),i("ac1f"),i("1276"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861");var r=a(i("c2c8")),l=(i("b55c"),i("2fa1")),c={data:function(){return{describeData:{},isShow:!1,actionList:[],imageUrl:"",percent:100,status:"",action:"",isShow1:!1,selectList:[]}},onLoad:function(){var t=this,e=this,i=this.getOpenerEventChannel();i.on("imageInfo",(function(t){e.describeData=t,e.action=t.action;var i=e.describeData.buttons.filter((function(t){return""!==t.label})),a=e.describeData.buttons.filter((function(t){return""==t.label}));if(e.describeData.buttons=[].concat((0,s.default)(i),(0,s.default)(a)),e.actionList=t.buttons,e.imageUrl=t.imageUrl,2==t.action){e.action=2;var n=t.prompt.split(/[(\r\n)\r\n]+/);e.describeData.prompt=n}})),this.$Request.post("/api/midjourney/inspireClassifyQuery",{page:1,size:20}).then((function(e){t.selectList=e.data.rows}))},methods:{returnPage:function(){uni.navigateBack({delta:1})},copyClick:function(t){uni.setClipboardData({data:t,success:function(t){uni.showToast({title:"复制成功",icon:"success"})}})},downloadClick:function(){this.saveImageH5()},saveImage:function(){uni.showLoading({title:"下载中"}),uni.downloadFile({url:this.imageUrl,success:function(t){uni.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(){uni.hideLoading(),uni.showToast({title:"保存成功",icon:"success"})},fail:function(){uni.hideLoading(),uni.showToast({title:"保存失败",icon:"error"})}})}})},saveImageApp:function(t){var e=new plus.nativeObj.Bitmap("test");e.loadBase64Data(t,(function(){var t="_doc/"+new Date+".png";console.log("url:",t),e.save(t,{overwrite:!0},(function(i){uni.saveImageToPhotosAlbum({filePath:t,success:function(){uni.showToast({title:"保存成功",icon:"none"}),e.clear()}})}),(function(t){uni.showToast({title:"保存失败",icon:"none"}),console.log(t),e.clear()}))}),(function(t){console.log("保存失败",t),e.clear()}))},saveImageH5:function(){uni.showLoading({title:"下载中"});var t=this.imageUrl.split("/").pop();console.log(t),r.default.get(l.publicPath+"/api/proxy/down",{responseType:"blob",params:{url:this.imageUrl}}).then((function(e){var i=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=i,a.setAttribute("download",t),a.click(),uni.hideLoading(),uni.showToast({title:"下载成功",icon:"success"})}))},plusClick:function(){console.log("发布"),this.isShow1=!0},handleMore:function(){if(this.describeData.buttons.length&&(this.isShow=!0),this.describeData.buttons){var t=this.describeData.buttons.filter((function(t){return""!==t.label})),e=this.describeData.buttons.filter((function(t){return""==t.label}));this.describeData.buttons=[].concat((0,s.default)(t),(0,s.default)(e))}},handleClick:function(t){var e=this,i=this;uni.showLoading({title:"加载中"});var a={type:4,params:{action:4,customId:t.customId,messageFlags:0,taskId:this.describeData.id}};this.$Request.post("/api/midjourney/task_add",a).then((function(t){400==t.code||402==t.code?(uni.hideLoading(),uni.showToast({title:t.message,icon:"none"})):200==t.code&&(uni.hideLoading(),e.percent=0,e.actionList=[],e.isShow=!1,e.timer=setInterval((function(){i.handleGetCurrentDraw(t.data)}),5e3))}))},publish:function(t){var e=this,i={squareType:t.id,id:this.describeData.id};this.$Request.post("/api/midjourney/rec",i).then((function(t){200==t.code&&(uni.showToast({title:"发布成功",icon:"success"}),e.isShow1=!1)}))},handleGetCurrentDraw:function(t){var e=this;return(0,o.default)((0,n.default)().mark((function i(){return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,e.$Request.get("/api/midjourney/getDraw",{jobId:t}).then((function(t){if(e.currentTask=t.data,t.data.imageUrl&&(e.imageUrl=t.data.imageUrl),t.data.buttons){var i=t.data.buttons.filter((function(t){return""!==t.label})),a=t.data.buttons.filter((function(t){return""==t.label}));e.actionList=[].concat((0,s.default)(i),(0,s.default)(a))}e.drawIntro=t.data.originPrompt,e.percent=t.data.progress,e.status=t.data.status,(4==t.data.status||3==t.data.status)&&clearInterval(e.timer)}));case 4:case"end":return i.stop()}}),i)})))()},comeBack:function(){uni.switchTab({url:"/pages/main/home/index"})}}};e.default=c},"37b0":function(t,e,i){"use strict";i.r(e);var a=i("43c6"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"43c6":function(t,e,i){"use strict";i("7a82");var a=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("ae19")),o={name:"u-line-progress",mixins:[uni.$u.mpMixin,uni.$u.mixin,n.default],data:function(){return{lineWidth:0}},watch:{percentage:function(t){this.resizeProgressWidth()}},computed:{progressStyle:function(){var t={};return t.width=this.lineWidth,t.backgroundColor=this.activeColor,t.height=uni.$u.addUnit(this.height),t},innserPercentage:function(){return uni.$u.range(0,100,this.percentage)}},mounted:function(){this.init()},methods:{init:function(){var t=this;uni.$u.sleep(20).then((function(){t.resizeProgressWidth()}))},getProgressWidth:function(){return this.$uGetRect(".u-line-progress__background")},resizeProgressWidth:function(){var t=this;this.getProgressWidth().then((function(e){var i=e.width;t.lineWidth=i*t.innserPercentage/100+"px"}))}}};e.default=o},"4fb2":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-line-progress",style:[t.$u.addStyle(t.customStyle)]},[i("v-uni-view",{ref:"u-line-progress__background",staticClass:"u-line-progress__background",style:[{backgroundColor:t.inactiveColor,height:t.$u.addUnit(t.height)}]}),i("v-uni-view",{staticClass:"u-line-progress__line",style:[t.progressStyle]},[t._t("default",[t.showText&&t.percentage>=10?i("v-uni-text",{staticClass:"u-line-progress__text"},[t._v(t._s(t.innserPercentage+"%"))]):t._e()])],2)],1)},n=[]},"65f5":function(t,e,i){"use strict";i.r(e);var a=i("cc0a"),n=i("f5a3");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("a64c");var s=i("f0c5"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"0f798379",null,!1,a["a"],void 0);e["default"]=r.exports},"958f":function(t,e,i){"use strict";i.r(e);var a=i("4fb2"),n=i("37b0");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("e164");var s=i("f0c5"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"5a885ee4",null,!1,a["a"],void 0);e["default"]=r.exports},a64c:function(t,e,i){"use strict";var a=i("e27d"),n=i.n(a);n.a},ab37:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-5a885ee4], uni-scroll-view[data-v-5a885ee4], uni-swiper-item[data-v-5a885ee4]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-line-progress[data-v-5a885ee4]{align-items:stretch;position:relative;display:flex;flex-direction:row;flex:1;overflow:hidden;border-radius:100px}.u-line-progress__background[data-v-5a885ee4]{background-color:#ececec;border-radius:100px;flex:1}.u-line-progress__line[data-v-5a885ee4]{position:absolute;top:0;left:0;bottom:0;align-items:center;display:flex;flex-direction:row;color:#fff;border-radius:100px;transition:width .5s ease;justify-content:flex-end}.u-line-progress__text[data-v-5a885ee4]{font-size:10px;align-items:center;text-align:right;color:#fff;margin-right:5px;-webkit-transform:scale(.9);transform:scale(.9)}',""]),t.exports=e},abed:function(t,e,i){var a=i("ab37");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("59db18f0",a,!0,{sourceMap:!1,shadowMode:!1})},ae19:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3");var a={props:{activeColor:{type:String,default:uni.$u.props.lineProgress.activeColor},inactiveColor:{type:String,default:uni.$u.props.lineProgress.color},percentage:{type:[String,Number],default:uni.$u.props.lineProgress.inactiveColor},showText:{type:Boolean,default:uni.$u.props.lineProgress.showText},height:{type:[String,Number],default:uni.$u.props.lineProgress.height}}};e.default=a},b55c:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.toBase64=void 0,i("d3b7");e.toBase64=function(t){return new Promise((function(e,i){uni.request({url:t,responseType:"arraybuffer",success:function(t){e(uni.arrayBufferToBase64(t.data))}})}))}},cc0a:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uIcon:i("cf17").default,uLineProgress:i("958f").default,uPopup:i("ff7e").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"createResult_box"},[i("v-uni-view",{staticClass:"tabbar"},[i("v-uni-view",[i("u-icon",{attrs:{name:"arrow-left",color:"#FFFFFF",size:"20px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.returnPage.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"createResult_main"},[i("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[i("v-uni-view",{staticClass:"image_card"},[i("v-uni-image",{attrs:{src:t.imageUrl,mode:"widthFix"}})],1),100!=t.percent?i("v-uni-view",{staticClass:"line"},[i("v-uni-view",{staticStyle:{color:"#FFFFFF"}},[t._v("正在生成中...")]),i("u-line-progress",{attrs:{"show-percent":!0,percentage:t.percent,"active-color":"#3742FA","inactive-color":"#262643"}})],1):t._e(),3!==t.action?i("v-uni-view",{staticClass:"text_card"},[i("v-uni-view",{staticClass:"title_card"},[i("v-uni-view",{staticStyle:{color:"#999999"}},[t._v("画面描述")]),i("v-uni-view",{staticStyle:{color:"#1E90FF"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyClick(t.describeData.originPrompt)}}},[t._v("全部复制")])],1),2!==t.action?i("v-uni-view",{staticStyle:{color:"#ffffff","padding-top":"40rpx","line-height":"40rpx"}},[t._v(t._s(t.describeData.originPrompt))]):t._e(),2==t.action?i("v-uni-view",{},t._l(t.describeData.prompt,(function(e,a){return i("v-uni-view",{key:a,staticStyle:{color:"#ffffff","padding-top":"40rpx","line-height":"40rpx"}},[t._v(t._s(e))])})),1):t._e()],1):t._e(),i("v-uni-view",{staticStyle:{"padding-bottom":"60rpx"}})],1),i("v-uni-view",{staticClass:"bottom_tabber"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{staticStyle:{"margin-right":"20rpx"}},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.downloadClick.apply(void 0,arguments)}}},[i("u-icon",{attrs:{name:"download",size:"25",color:"#999999"}}),i("v-uni-view",[t._v("下载")])],1)],1),i("v-uni-view",{staticStyle:{"margin-top":"10rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.plusClick.apply(void 0,arguments)}}},[i("v-uni-view",[i("u-icon",{attrs:{name:"plus",size:"20",color:"#999999"}}),i("v-uni-view",[t._v("发布")])],1)],1)],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-button",{staticStyle:{"font-size":"28rpx",border:"2rpx solid #1E90FF",color:"#1E90FF"},attrs:{plain:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleMore.apply(void 0,arguments)}}},[t._v("更多")]),i("v-uni-button",{staticStyle:{"font-size":"28rpx",background:"linear-gradient(#3742FA, #1E90FF)",color:"#ffffff","margin-left":"20rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comeBack.apply(void 0,arguments)}}},[t._v("再来一张")])],1)],1)],1),i("u-popup",{attrs:{show:t.isShow,mode:"bottom"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.isShow=!1}}},[i("v-uni-view",{staticClass:"moreBox"},[i("v-uni-view",{staticClass:"topTitle"},[i("v-uni-view",{staticClass:"topMoreLeft"}),i("v-uni-view",{staticClass:"moreTitle"},[t._v("更多操作")]),i("v-uni-view",{staticClass:"topMoreRight"},[i("u-icon",{attrs:{name:"close"}})],1)],1),i("v-uni-view",{staticClass:"actionBox"},t._l(t.actionList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"actionItem",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleClick(e)}}},[t._v(t._s(e.label?e.label:e.emoji))])})),1),i("v-uni-view",{staticClass:"bottomTitle"},[i("v-uni-view",{staticClass:"left"},[t._v("时间：2023-12-25 19:43:38")]),i("v-uni-view",{staticClass:"right"},[t._v("快速模式")])],1)],1)],1),i("u-popup",{attrs:{mode:"bottom",show:t.isShow1},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.isShow1=!1}}},[i("v-uni-view",{staticClass:"publishBox"},[i("v-uni-view",{staticClass:"selectIntro"},[t._v("发布到广场")]),i("v-uni-view",{staticClass:"squareType"},[t._v("请选择广场类型:")]),i("v-uni-view",{staticClass:"selectList"},t._l(t.selectList,(function(e){return i("v-uni-view",{key:e.id,staticClass:"selectItem",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.publish(e)}}},[t._v(t._s(e.name))])})),1)],1)],1)],1)},o=[]},e164:function(t,e,i){"use strict";var a=i("abed"),n=i.n(a);n.a},e27d:function(t,e,i){var a=i("1b56");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("76260302",a,!0,{sourceMap:!1,shadowMode:!1})},f5a3:function(t,e,i){"use strict";i.r(e);var a=i("25ea"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a}}]);