import{_ as e,a,b as t,c as l}from"../end/end.08128031.js";import{_ as i,a as s,b as o,c as r,d as c}from"../unthumbs1/unthumbs1.60163221.js";import{S as n}from"../index/index.a184fda1.js";import{d,u,v as g,g as p,y as m,i as v,l as h,j as f,n as x,h as y,k,F as I,r as b,Z as C,m as L,o as w,_ as A,C as E,D as F,aC as j,H as N}from"../main-9f041486.js";import{i as B,a as T,b as U,d as _,j as O}from"./music.aabbafa0.js";import{p as R}from"../index/index.faf64f9d.js";const H=e=>(E("data-v-62256417"),e=e(),F(),e),M={class:"bg-[#f4f4f4] dark:bg-[#020104] musicBody"},D={key:1,class:"videoBox"},S=H((()=>f("div",{style:{width:"504px",height:"756px","border-radius":"8px",position:"relative",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"},class:"bg-[#E5EDFE] dark:bg-[#0A182F]"},[f("div",{style:{width:"50px",height:"50px"}},[f("div",{class:"loader"})]),f("p",{style:{"margin-top":"10px"}},"视频生成中，请稍等")],-1))),q=["src"],z={class:"control"},J={class:"myCreate bg-[#fff] dark:bg-[#15171A]"},Z={class:"myCreateTop"},G=H((()=>f("div",{style:{"margin-left":"4px"}},"我的创作",-1))),K=H((()=>f("div",{style:{width:"100%",height:"2px"},class:"bg-[#fff] dark:bg-[#010102]"},null,-1))),P={class:"mainLeft"},Q=["onClick","src"],V={key:1,style:{width:"108px",height:"108px","border-radius":"8px"},src:c,alt:""},W={class:"itemInfo"},X={class:"info",style:{width:"80%"}},Y={style:{width:"40px",height:"18px","border-radius":"16px","text-align":"center",color:"#34C759"},class:"bg-[#EBF9EE] dark:bg-[#175A28]"},$={style:{margin:"6px 0"}},ee={class:"musicIntro"},ae={class:"operation"},te=["onClick"],le=["onClick"],ie=["onClick"],se=["onClick"],oe={class:"iconBox",style:{position:"relative"}},re={key:0,class:"operationBox bg-[#fff] dark:bg-[#15171A]"},ce=["onClick"],ne=H((()=>f("div",null,"下载视频",-1))),de=["onClick"],ue=H((()=>f("div",null,"下载音频",-1))),ge=["onClick"],pe=H((()=>f("div",null,"删除",-1))),me={class:"end text-[#A3A5A6] dark:text-[#76777A]"},ve=["href"],he=["href"],fe=N(d({__name:"myCenter",setup(c){let d=null;const E=u();g();const{isMobile:F}=p(),N=m([]),H=m(1),fe=m();function xe(){d||(d=E.loading("数据加载中",{duration:0})),B({page:H.value,size:40}).then((e=>{Ee(),fe.value=e.data.count;const{records:a}=e.data;let t=[];a.filter((e=>-1!=e.text.indexOf("https"))).map((e=>{const[a,l]=R(e.text);let{options:i}=e.requestOptions;return null!=i&&(a.model=i.model.split("-")[1],l.model=i.model.split("-")[1]),a.chatLogId=e.chatId,a.agree=e.agree,l.agree=e.agree,l.chatLogId=e.chatId,t=[...t,a,l],t})),N.value=[...N.value,...t]})).catch((e=>{Ee()}))}xe();const ye=m(""),ke=m(""),Ie=m(""),be=m(""),Ce=m("");T({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{ye.value=e.data.copyrightTitle,ke.value=e.data.icpNumber,Ie.value=e.data.policeFilingNumber,be.value=e.data.icpUrl,Ce.value=e.data.policeFilingUrl}));const Le=m(1);function we(e,a){if(0==a){let a={relateId:e.chatLogId,action:"agree",relateType:"suno"};if(0==Le.value)return;Le.value=0,_(a).then((a=>{"agree"==e.agree?N.value.forEach((a=>{a.chatLogId==e.chatLogId&&(a.agree=null,a.agreeNum--)})):(null==e.agree||"disAgree"==e.agree)&&N.value.forEach((a=>{a.chatLogId==e.chatLogId&&(a.agree="agree",a.agreeNum++)})),Le.value=1}))}else if(1==a){let a={chatLogId:e.chatLogId,action:"disAgree",type:"suno"};if(0==Le.value)return;Le.value=0,_(a).then((a=>{"agree"==e.agree?N.value.forEach((a=>{a.chatLogId==e.chatLogId&&(a.agree="disAgree",a.agreeNum--)})):null==e.agree?N.value.forEach((a=>{a.chatLogId==e.chatLogId&&(a.agree="disAgree")})):"disAgree"==e.agree&&N.value.forEach((a=>{a.chatLogId==e.chatLogId&&(a.agree="null")})),Le.value=1}))}}const Ae=m(!1);function Ee(){d&&(d.destroy(),d=null)}function Fe(e,a){let t="/api";if(d||(d=E.loading("下载中，请稍等",{duration:0})),"mp4"==a){let a=e.mp4.split("/").pop();Ue(),j.get(t+"/proxy/down",{responseType:"blob",params:{url:e.mp4}}).then((e=>{const t=window.URL.createObjectURL(new Blob([e.data])),l=document.createElement("a");l.href=t,l.setAttribute("download",a),l.click(),Ee(),E.success("下载成功")}))}else if("mp3"==a){let a=e.mp3.split("/").pop();Ue(),j.get(t+"/proxy/down",{responseType:"blob",params:{url:e.mp3}}).then((e=>{const t=window.URL.createObjectURL(new Blob([e.data])),l=document.createElement("a");l.href=t,l.setAttribute("download",a),l.click(),Ee(),E.success("下载成功")}))}}const je=m(""),Ne=m(!0);function Be(){const e=document.getElementById("video");Ne.value?(Ne.value=!1,e.pause()):(Ne.value=!0,e.play())}function Te(e){let a=[],t=N.value.filter((e=>"解析错误"!=e.mp4));t.forEach((e=>{a=[...a,e.mp4]}));let l=a.indexOf(je.value);if(0==e){if(0==l)return;l--;let e={recoredId:t[l].chatId};t[l].playNum++,U(e).then((e=>{})),je.value=a[l]}else if(1==e){if(l==a.length-1)return;l++;let e={recoredId:t[l].chatId};t[l].playNum++,U(e).then((e=>{})),je.value=a[l]}}function Ue(){Ae.value=!1,N.value.forEach((e=>{e.operation=!1}))}const _e=m(null);function Oe(){const e=_e.value;if(e.scrollTop+e.clientHeight+1>=e.scrollHeight){if(20*H.value>=fe.value)return void E.error("没有更多数据了");H.value++,xe()}}return(c,d)=>(w(),v("div",M,[Ae.value?(w(),v("div",{key:0,class:"mask",onClick:Ue})):h("",!0),je.value?(w(),v("div",D,[S,f("video",{class:"video",autoplay:"",id:"video",loop:"",src:je.value},null,8,q),x(y(A),{icon:"icon-park-solid:close-one",class:"text-xl text-[#fff] text-center icon",onClick:d[0]||(d[0]=e=>je.value="")}),f("div",z,[f("img",{class:"controlItem",style:{cursor:"pointer"},src:e,alt:"",onClick:d[1]||(d[1]=e=>Te(0))}),Ne.value?(w(),v("img",{key:0,class:"controlItem",src:a,style:{margin:"0 50px",cursor:"pointer"},alt:"",onClick:Be})):h("",!0),Ne.value?h("",!0):(w(),v("img",{key:1,class:"controlItem",src:t,style:{margin:"0 50px",cursor:"pointer"},alt:"",onClick:Be})),f("img",{class:"controlItem",style:{cursor:"pointer"},src:l,alt:"",onClick:d[2]||(d[2]=e=>Te(1))})])])):h("",!0),y(F)?h("",!0):(w(),k(n,{key:2,sideType:1})),f("div",J,[f("div",Z,[x(y(A),{icon:"icomoon-free:file-music",class:"text-xl text-center"}),G]),K,f("div",{class:"myCreateMain",ref_key:"container",ref:_e,onScroll:Oe},[f("div",P,[(w(!0),v(I,null,b(N.value,((e,a)=>(w(),v("div",{class:"mainItem dark:bg-[#0A182F] bg-[#F5F8FE]",key:a},["解析错误"!=e.image?(w(),v("img",{key:0,style:{width:"108px",height:"108px","border-radius":"8px"},onClick:a=>function(e){je.value=e.mp4;let a={recoredId:e.chatLogId};e.playNum++,U(a).then((e=>{}))}(e),src:e.image,alt:""},null,8,Q)):h("",!0),"解析错误"==e.image?(w(),v("img",V)):h("",!0),f("div",W,[f("div",X,[f("div",Y,L(e.model),1),f("div",$,L(e.title?e.title:"匿名"),1),f("div",ee,L(e.intro),1)]),f("div",ae,["agree"!=e.agree?(w(),v("img",{key:0,class:"icon",onClick:a=>we(e,0),src:i,alt:""},null,8,te)):h("",!0),"agree"==e.agree?(w(),v("img",{key:1,class:"icon",onClick:a=>we(e,0),src:s,alt:""},null,8,le)):h("",!0),"disAgree"!=e.agree?(w(),v("img",{key:2,class:"icon",onClick:a=>we(e,1),src:o,alt:""},null,8,ie)):h("",!0),"disAgree"==e.agree?(w(),v("img",{key:3,class:"icon",onClick:a=>we(e,1),src:r,alt:""},null,8,se)):h("",!0),f("div",oe,[x(y(A),{icon:"ri:more-line",class:"text-xl text-center icon",onClick:a=>function(e){e.operation=!0,Ae.value=!0}(e)},null,8,["onClick"]),e.operation?(w(),v("div",re,[f("div",{class:"operationItem",style:{display:"flex"},onClick:a=>Fe(e,"mp4")},[x(y(A),{icon:"gravity-ui:video",style:{"margin-right":"5px"},class:"text-xl text-center"}),ne],8,ce),f("div",{class:"operationItem",style:{display:"flex"},onClick:a=>Fe(e,"mp3")},[x(y(A),{icon:"fluent:headphones-sound-wave-24-filled",style:{"margin-right":"5px"},class:"text-xl text-center"}),ue],8,de),f("div",{class:"operationItem",style:{display:"flex",color:"#FF5E55"},onClick:a=>function(e){let a={id:e.chatLogId};Ue(),O(a).then((a=>{E.success("删除成功"),N.value=N.value.filter((a=>a.chatLogId!=e.chatLogId))}))}(e)},[x(y(A),{icon:"mi:delete",style:{"margin-right":"5px","margin-top":"5px"},class:"text-xl text-center"}),pe],8,ge)])):h("",!0)])])])])))),128))])],544),f("div",me,[C("版权所有 © "+L(ye.value)+" ",1),f("a",{href:be.value||"#"},[f("a",{href:Ce.value||"#"},L(Ie.value),9,he),C(L(ke.value),1)],8,ve)])])]))}}),[["__scopeId","data-v-62256417"]]);export{fe as default};
