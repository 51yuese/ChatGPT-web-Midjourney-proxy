import{d as e,b as l,c as a,u as t,S as i,g as s,y as n,z as r,i as o,l as c,h as u,k as d,j as g,n as v,w as m,a0 as p,a1 as h,m as x,a2 as f,F as b,r as y,M as k,Z as F,o as E,b6 as I,aH as B,_ as w,$ as C,al as L,C as A,D as N,aC as T,H as _}from"../main-9f041486.js";import{_ as D,a as U,b as j,c as V,d as M}from"../unthumbs1/unthumbs1.60163221.js";import{a as S,b as z,_ as O,c as q}from"../end/end.08128031.js";import{S as R}from"../index/index.a184fda1.js";import{a as G,e as H,h as J,m as $,f as Z,g as K,d as P}from"./music.aabbafa0.js";import{p as Q}from"../index/index.faf64f9d.js";const W=e=>(A("data-v-9bf59170"),e=e(),N(),e),X={class:"bg-[#f4f4f4] dark:bg-[#020104] musicBody"},Y={class:"createBox dark:bg-[#15171A] bg-[#fff]"},ee={class:"createTop"},le={class:"switchBox"},ae={style:{display:"flex",padding:"0 4px","align-items":"center",height:"36px","line-height":"36px"}},te=W((()=>g("div",{style:{"margin-left":"4px"}},"自定义模式",-1))),ie={key:0,class:"describeBox"},se={class:"describeTitle"},ne=W((()=>g("div",{class:"line bg-[#3378ED] dark:bg-[#2960BE]"},null,-1))),re=W((()=>g("div",{style:{"margin-right":"4px"}},"歌曲描述",-1))),oe=W((()=>g("span",null,'描述你想要的音乐风格和主题（例如"关于毕业"）。使用流派和氛围，而不是特定的艺术家和歌曲。',-1))),ce={class:"describeMain bg-[#F4F4F4] dark:bg-[#010102]"},ue=W((()=>g("div",{style:{"margin-left":"4px"}},"随机生成歌词",-1))),de={style:{display:"flex",padding:"0 4px","align-items":"center",height:"36px","line-height":"36px"}},ge=W((()=>g("div",{style:{"margin-left":"4px","margin-right":"4px"}},"纯音乐",-1))),ve=W((()=>g("span",null,"没有歌词的音乐",-1))),me={key:0,class:"lyricsBox"},pe={class:"lyricsTitle"},he=W((()=>g("div",{class:"line bg-[#3378ED] dark:bg-[#2960BE]"},null,-1))),xe=W((()=>g("div",{style:{"margin-right":"4px"}},"歌词",-1))),fe=W((()=>g("span",null,"随机生成歌词，自己写，或者从AI那里得到一些帮助。使用两首诗（8行）获得最佳效果。",-1))),be={class:"lyricsMain bg-[#F4F4F4] dark:bg-[#010102]"},ye=W((()=>g("div",{style:{"margin-left":"4px"}},"随机生成歌词",-1))),ke={key:1,class:"musicBox"},Fe={class:"musicTitle"},Ee=W((()=>g("div",{class:"line bg-[#3378ED] dark:bg-[#2960BE]"},null,-1))),Ie=W((()=>g("div",{style:{"margin-right":"4px"}},"音乐风格",-1))),Be=W((()=>g("span",null,"描述你想要的音乐风格 例如：流行、摇滚、史诗。Suno的模型无法识别具体的艺人名称，但能理解音乐类型和氛围。",-1))),we={class:"musicMain bg-[#F4F4F4] dark:bg-[#010102]"},Ce=W((()=>g("div",{style:{"margin-left":"4px"}},"生成音乐风格",-1))),Le={key:2,class:"musicNameBox"},Ae={class:"musicNameTitle"},Ne=W((()=>g("div",{class:"line bg-[#3378ED] dark:bg-[#2960BE]"},null,-1))),Te=W((()=>g("div",{style:{"margin-right":"4px"}},"歌曲名称",-1))),_e=W((()=>g("span",null,"为你的歌曲命名",-1))),De={class:"musicNameMain bg-[#F4F4F4] dark:bg-[#010102]"},Ue={class:"musicModeBox"},je={class:"musicModeTitle"},Ve=W((()=>g("div",{class:"line bg-[#3378ED] dark:bg-[#2960BE]"},null,-1))),Me=W((()=>g("div",{style:{"margin-right":"4px"}},"音乐模型",-1))),Se=W((()=>g("span",null,"官方音乐模型",-1))),ze=["onClick"],Oe=W((()=>g("div",{class:"prompt dark:bg-[#0A182F] bg-[#F5F8FE] dark:text-[#2960BE] text-[#3378ED]"}," 温馨提示：每个作品生成大概2分钟左右，请勿关闭页面。",-1))),qe={class:"createBottm border-t-[1px] dark:border-[#4B4D50] border-[#000]"},Re={class:"createCenterBox dark:bg-[#15171A] bg-[#fff]"},Ge={class:"createCenterTop"},He=W((()=>g("div",{style:{"margin-left":"4px","font-size":"15px"}},"创作中心",-1))),Je=W((()=>g("div",{style:{width:"100%",height:"2px"},class:"bg-[#fff] dark:bg-[#010102]"},null,-1))),$e={class:"createCenterMain"},Ze={class:"mainLeft"},Ke=["onClick","src"],Pe={key:1,style:{width:"108px",height:"108px","border-radius":"8px"},src:M,alt:""},Qe={class:"itemInfo"},We={class:"info",style:{flex:"1","margin-right":"10px"}},Xe={style:{width:"40px",height:"18px","border-radius":"16px","text-align":"center",color:"#34C759"},class:"bg-[#EBF9EE] dark:bg-[#175A28]"},Ye={style:{margin:"6px 0"}},el={style:{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"2",overflow:"hidden","text-overflow":"ellipsis"}},ll={class:"operation"},al=["onClick"],tl=["onClick"],il=["onClick"],sl=["onClick"],nl={key:4,class:"operationBox bg-[#fff] dark:bg-[#15171A]"},rl=["onClick"],ol=W((()=>g("div",null,"下载视频",-1))),cl=["onClick"],ul=W((()=>g("div",null,"下载音频",-1))),dl={style:{width:"108px",height:"108px","border-radius":"8px",position:"relative",display:"flex","justify-content":"center","align-items":"center"}},gl={class:"itemInfo"},vl={class:"info"},ml={style:{width:"40px",height:"18px","border-radius":"16px","text-align":"center",color:"#34C759"},class:"bg-[#EBF9EE] dark:bg-[#175A28]"},pl={style:{margin:"6px 0"}},hl={style:{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"2",overflow:"hidden","text-overflow":"ellipsis"}},xl={class:"operation"},fl=W((()=>g("div",{class:"initial bg-[#D1D2D3] dark:bg-[#484A4D]"},null,-1))),bl={class:"progressNum"},yl={style:{display:"flex",position:"absolute",top:"0",left:"20px","align-items":"center"}},kl=W((()=>g("div",{style:{"margin-left":"10px","font-size":"13px",color:"#4B88EF"}},"创作中，请耐心等待",-1))),Fl={class:"mainRight"},El={key:0},Il=["src"],Bl=W((()=>g("div",{class:"dark:bg-[#020104] bg-[#F4F4F4]",style:{width:"100%",height:"700px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[g("div",{style:{width:"50px",height:"50px"}},[g("div",{class:"loader"})]),g("p",{style:{"margin-top":"10px"}},"视频生成中，请稍等")],-1))),wl={class:"control"},Cl=W((()=>g("img",{class:"controlItem",src:O,alt:""},null,-1))),Ll=W((()=>g("img",{class:"controlItem",src:q,alt:""},null,-1))),Al={key:1,style:{"text-align":"center"}},Nl={class:"end text-[#A3A5A6] dark:text-[#76777A]"},Tl=["href"],_l=["href"],Dl=_(e({__name:"creativeCenter",setup(e){const A=l(),N=a((()=>A.isLogin));let _=null;const M=t(),O=i(),{isMobile:q}=s(),W=n(!0),Dl=n(!1);function Ul(e){W.value=e}const jl=n(""),Vl=n(""),Ml=n(""),Sl=n(""),zl=n("");G({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{jl.value=e.data.copyrightTitle,Vl.value=e.data.icpNumber,Ml.value=e.data.policeFilingNumber,Sl.value=e.data.icpUrl,zl.value=e.data.policeFilingUrl}));const Ol=n([{name:"V3（一次生成两首歌）",value:"suno-v3",title:"V3"},{name:"V3.5（一次生成两首歌）",value:"suno-v3.5",title:"V3.5"}]),ql=n("");ql.value=Ol.value[0].name;const Rl=n(!1);function Gl(){Rl.value=!0}const Hl=n([]),Jl=n([]),$l=n(!1),Zl=n(1);function Kl(e,l){if(e.image)if(0==l){let l={chatLogId:e.chatLogId,action:"agree",type:"suno"};if(0==Zl.value)return;Zl.value=0,P(l).then((l=>{"agree"==e.agree?Jl.value.forEach((l=>{l.chatLogId==e.chatLogId&&(l.agree=null,l.agreeNum--)})):null==e.agree?Jl.value.forEach((l=>{l.chatLogId==e.chatLogId&&(l.agree="agree",l.agreeNum++,console.log(Jl.value))})):"disAgree"==e.agree&&Jl.value.forEach((l=>{l.chatLogId==e.chatLogId&&(l.agree="agree",l.agreeNum++)})),Zl.value=1}))}else if(1==l){let l={chatLogId:e.chatLogId,action:"disAgree",type:"suno"};if(0==Zl.value)return;Zl.value=0,P(l).then((l=>{"agree"==e.agree?Jl.value.forEach((l=>{l.chatLogId==e.chatLogId&&(l.agree="disAgree",l.agreeNum--)})):null==e.agree?Jl.value.forEach((l=>{l.chatLogId==e.chatLogId&&(l.agree="disAgree")})):"disAgree"==e.agree&&Jl.value.forEach((l=>{l.chatLogId==e.chatLogId&&(l.agree="null")})),Zl.value=1}))}else 2==l||3==l&&(e.operation=!0,$l.value=!0)}function Pl(){N.value?function(){let e=Number(localStorage.getItem("musicGroupId"));na({prompt:Ql.value,options:{groupId:e},tags:ea.value,mv:Yl.value,title:Xl.value,make_instrumental:Wl.value})}():A.setLoginDialog(!0)}H({modelType:"music"}).then((e=>{})),J({size:20,page:1,order:"createAt"}).then((e=>{const{records:l}=e.data;l.filter((e=>-1!=e.text.indexOf("http")))}));const Ql=n(""),Wl=n(0),Xl=n(""),Yl=n("suno-v3"),ea=n(""),la=n(),aa=n();function ta(e){Dl.value=e,Wl.value=e?1:0}r((()=>{var e;e=O.query.id,$({size:40,page:1,order:"agreeNum"}).then((l=>{l.data;const a=l.data.records.filter((e=>e.text)).map((e=>{const[l,a]=Q(e.text);return e.title=l.title,e.image=l.image,e.agree=l.agree,e.agreeNum=l.agreeNum,e.operation=l.operation,e.intro=l.intro,e.mp3=l.mp3,e.mp4=l.mp4,e}));la.value=a,a.forEach(((l,t)=>{a[t].chatId==e&&(aa.value=a[t])})),aa.value&&function(e){const l=e.requestOptions.prompt;let a=l.split(", "),t=a.filter((e=>-1!=e.indexOf("prompt"))),i=a.filter((e=>-1!=e.indexOf("mv"))),s=a.filter((e=>-1!=e.indexOf("make_"))),n=a.filter((e=>-1!=e.indexOf("tags"))),r=a.filter((e=>-1!=e.indexOf("title")));Ql.value=String(t[0].split(" ")[1]),Yl.value=String(i[0].split(" ")[1]),Wl.value=Number(s[0].split(" ")[1]),0!=n.length&&(ea.value=String(n[0].split(" ")[1])),0!=r.length&&(Xl.value=String(r[0].split(" ")[1]));let o=Number(localStorage.getItem("musicGroupId")),c={prompt:Ql.value,options:{groupId:o},tags:ea.value,mv:Yl.value,title:Xl.value,make_instrumental:Wl.value};na(c)}(aa.value)}))}));const ia=n("V3");const sa=n(!0);async function na(e){if(!sa.value)return void M.error("创作中,请耐心等待");if(sa.value=!1,!Ql.value)return M.error("请输入歌词"),void(sa.value=!0);let l={},a={};l.name=Xl.value,l.intro=Ql.value,l.modetitle=ia.value,a.modetitle=ia.value,a.name=Xl.value,a.intro=Ql.value,Hl.value=[l,a],xa(!0),Ql.value="",Xl.value="",ea.value="",Z(e).then((e=>{const l=e.split("\n").pop(),a=JSON.parse(l);console.log(a);const[t,i]=Q(a.text);t.name=t.title,i.name=i.title,t.chatLogId=a.chatLogId,i.chatLogId=a.chatLogId,t.modetitle=ia.value,i.modetitle=ia.value,Hl.value=[],Jl.value=[...Jl.value,t,i],sa.value=!0,xa(!1)})).catch((e=>{console.log("err :",e),M.error("请求失败");const[l,a]=Q("Request failed");Hl.value=[],l.modetitle=ia.value,a.modetitle=ia.value,Jl.value=[...Jl.value,l,a],sa.value=!0,xa(!1)}))}const ra=n(),oa=n(!0);function ca(){const e=document.getElementById("video");console.log(e),oa.value?(oa.value=!1,e.pause()):(oa.value=!0,e.play())}function ua(){K({dictType:"music-lyrics"}).then((e=>{Ql.value=e.data.dictValue}))}function da(e){if(0==e){K({dictType:"music-lyrics"}).then((e=>{Xl.value=e.data.dictName,Ql.value=e.data.dictValue}))}else if(1==e){K({dictType:"music-style"}).then((e=>{ea.value=e.data.dictValue}))}}function ga(){Rl.value=!1,$l.value=!1,Jl.value.forEach((e=>{e.operation=!1}))}function va(){_&&(_.destroy(),_=null)}function ma(e,l){let a="/api";if(_||(_=M.loading("下载中，请稍等",{duration:0})),"mp4"==l){let l=e.mp4.split("/").pop();ga(),T.get(a+"/proxy/down",{responseType:"blob",params:{url:e.mp4}}).then((e=>{const a=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=a,t.setAttribute("download",l),t.click(),va(),M.success("下载成功")}))}else if("mp3"==l){let l=e.mp3.split("/").pop();ga(),T.get(a+"/proxy/down",{responseType:"blob",params:{url:e.mp3}}).then((e=>{const a=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=a,t.setAttribute("download",l),t.click(),va(),M.success("下载成功")}))}}const pa=n(0),ha=n(0);function xa(e){let l;pa.value=0,ha.value=0,1==e?l=setInterval((()=>{pa.value+=10,ha.value=pa.value/100*200,pa.value>=99&&(clearTimeout(l),pa.value=99,ha.value=pa.value/100*200)}),5e3):clearTimeout(l)}return(e,l)=>(E(),o("div",X,[Rl.value||$l.value?(E(),o("div",{key:0,class:"mask",onClick:ga})):c("",!0),u(q)?c("",!0):(E(),d(R,{key:1,sideType:1})),g("div",Y,[g("div",ee,[g("div",le,[g("div",ae,[v(u(B),null,{default:m((()=>[v(u(I),{value:W.value,"onUpdate:value":[l[0]||(l[0]=e=>W.value=e),Ul],size:"small"},null,8,["value"])])),_:1}),te]),W.value?c("",!0):(E(),o("div",ie,[g("div",se,[ne,re,v(u(C),{trigger:"hover",placement:"right"},{trigger:m((()=>[v(u(w),{icon:"mage:question-mark-circle"})])),default:m((()=>[oe])),_:1})]),g("div",ce,[p(g("textarea",{class:"describeText bg-[#F4F4F4] dark:bg-[#010102]",placeholder:"创作一首关于想和你在一起的流行歌曲","onUpdate:modelValue":l[1]||(l[1]=e=>Ql.value=e),cols:"20",rows:"10"},null,512),[[h,Ql.value]]),g("div",{class:"describeBtn bg-[#3378ED] dark:bg-[#2960BE]",onClick:ua},[v(u(w),{icon:"ion:dice-outline"}),ue])])])),g("div",de,[v(u(B),null,{default:m((()=>[v(u(I),{value:Dl.value,"onUpdate:value":[l[2]||(l[2]=e=>Dl.value=e),ta],size:"small"},null,8,["value"])])),_:1}),ge,v(u(C),{trigger:"hover",placement:"right"},{trigger:m((()=>[v(u(w),{icon:"mage:question-mark-circle"})])),default:m((()=>[ve])),_:1})])]),W.value?(E(),o("div",me,[g("div",pe,[he,xe,v(u(C),{trigger:"hover",placement:"right"},{trigger:m((()=>[v(u(w),{icon:"mage:question-mark-circle"})])),default:m((()=>[fe])),_:1})]),g("div",be,[p(g("textarea",{class:"lyricsText bg-[#F4F4F4] dark:bg-[#010102]",placeholder:"请输入你的歌词","onUpdate:modelValue":l[3]||(l[3]=e=>Ql.value=e),cols:"20",rows:"10"},null,512),[[h,Ql.value]]),g("div",{onClick:l[4]||(l[4]=e=>da(0)),class:"lyricsBtn bg-[#3378ED] dark:bg-[#2960BE]"},[v(u(w),{icon:"ion:dice-outline"}),ye])])])):c("",!0),W.value?(E(),o("div",ke,[g("div",Fe,[Ee,Ie,v(u(C),{trigger:"hover",placement:"right"},{trigger:m((()=>[v(u(w),{icon:"mage:question-mark-circle"})])),default:m((()=>[Be])),_:1})]),g("div",we,[p(g("textarea",{class:"musicText bg-[#F4F4F4] dark:bg-[#010102]",placeholder:"请输入你的风格","onUpdate:modelValue":l[5]||(l[5]=e=>ea.value=e),cols:"20",rows:"10"},null,512),[[h,ea.value]]),g("div",{onClick:l[6]||(l[6]=e=>da(1)),class:"musicBtn bg-[#3378ED] dark:bg-[#2960BE]"},[v(u(w),{icon:"ion:dice-outline"}),Ce])])])):c("",!0),W.value?(E(),o("div",Le,[g("div",Ae,[Ne,Te,v(u(C),{trigger:"hover",placement:"right"},{trigger:m((()=>[v(u(w),{icon:"mage:question-mark-circle"})])),default:m((()=>[_e])),_:1})]),g("div",De,[p(g("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>Xl.value=e),class:"musicNameText bg-[#F4F4F4] dark:bg-[#010102]",type:"text",placeholder:"请输入你的歌名"},null,512),[[h,Xl.value]])])])):c("",!0),g("div",Ue,[g("div",je,[Ve,Me,v(u(C),{trigger:"hover",placement:"right"},{trigger:m((()=>[v(u(w),{icon:"mage:question-mark-circle"})])),default:m((()=>[Se])),_:1})]),g("div",{class:"musicModeSelect bg-[#F4F4F4] dark:bg-[#010102]",onClick:Gl},[g("div",null,x(ql.value),1),v(u(w),{icon:"mingcute:down-line"})]),g("div",{class:"selectBox",style:f([{"max-height":"200px"},Rl.value?`height:${50*Ol.value.length}px`:"height:0"])},[(E(!0),o(b,null,y(Ol.value,((e,l)=>(E(),o("div",{class:"selectItem bg-[#F4F4F4] dark:bg-[#010102]",key:l,onClick:l=>function(e){ql.value=e.name,ia.value=e.title,Yl.value=e.value,Rl.value=!1}(e)},x(e.name),9,ze)))),128))],4)]),Oe]),g("div",qe,[g("div",{style:{display:"flex",cursor:"pointer"},class:k(sa.value?"dark:bg-[#2960BE] bg-[#3378ED] botton":"bg-[#A5B1B6] botton text-[#A5B1B6]"),onClick:Pl},[g("div",null,x(sa.value?"创作":"创作中,请耐心等待"),1),v(u(w),{icon:"majesticons:music-line",class:"text-xl text-center"})],2)])]),g("div",Re,[g("div",Ge,[v(u(w),{icon:"mage:light-bulb",class:"text-2xl text-center"}),He]),Je,g("div",$e,[g("div",Ze,[(E(!0),o(b,null,y(Jl.value,((e,l)=>(E(),o("div",{class:"mainItem dark:bg-[#0A182F] bg-[#F5F8FE]",key:l},[e.image?(E(),o("img",{key:0,onClick:l=>function(e){ra.value=e;const l=document.getElementById("video");l&&l.play(),oa.value=!0}(e),style:{width:"108px",height:"108px","border-radius":"8px"},src:e.image,alt:""},null,8,Ke)):c("",!0),e.image?c("",!0):(E(),o("img",Pe)),g("div",Qe,[g("div",We,[g("div",Xe,x(e.modetitle),1),g("div",Ye,x(e.name),1),g("div",el,x(e.intro),1)]),g("div",ll,["agree"!=e.agree?(E(),o("img",{key:0,class:"icon",onClick:l=>Kl(e,0),src:D,alt:""},null,8,al)):c("",!0),"agree"==e.agree?(E(),o("img",{key:1,class:"icon",onClick:l=>Kl(e,0),src:U,alt:""},null,8,tl)):c("",!0),"disAgree"!=e.agree?(E(),o("img",{key:2,class:"icon",onClick:l=>Kl(e,1),src:j,alt:""},null,8,il)):c("",!0),"disAgree"==e.agree?(E(),o("img",{key:3,class:"icon",onClick:l=>Kl(e,1),src:V,alt:""},null,8,sl)):c("",!0),v(u(w),{icon:"ri:more-line",class:"icon text-xl text-center",onClick:l=>Kl(e,3)},null,8,["onClick"]),e.operation?(E(),o("div",nl,[g("div",{class:"operationItem",onClick:l=>ma(e,"mp4"),style:{display:"flex"}},[v(u(w),{icon:"gravity-ui:video",style:{"margin-right":"5px"},class:"text-xl text-center"}),ol],8,rl),g("div",{class:"operationItem",onClick:l=>ma(e,"mp3"),style:{display:"flex"}},[v(u(w),{icon:"fluent:headphones-sound-wave-24-filled",style:{"margin-right":"5px"},class:"text-xl text-center"}),ul],8,cl)])):c("",!0)])])])))),128)),Hl.value?(E(!0),o(b,{key:0},y(Hl.value,((e,l)=>(E(),o("div",{class:"mainItem dark:bg-[#0A182F] bg-[#F5F8FE]",key:l},[g("div",dl,[v(u(B),null,{default:m((()=>[v(u(L),{stroke:"#76777A",size:"large"})])),_:1})]),g("div",gl,[g("div",vl,[g("div",ml,x(e.modetitle),1),g("div",pl,x(e.name),1),g("div",hl,x(e.intro),1)]),g("div",xl,[fl,g("div",{class:"progressLine",style:f({width:ha.value+"px"})},[g("div",bl,x(pa.value)+"%",1)],4),g("div",yl,[v(u(B),null,{default:m((()=>[v(u(L),{stroke:"#4B88EF",size:10})])),_:1}),kl])])])])))),128)):c("",!0)]),g("div",Fl,[ra.value?(E(),o("div",El,[g("video",{style:{position:"absolute","z-index":"10"},autoplay:"",id:"video",loop:"",src:ra.value.mp4},null,8,Il),Bl,g("div",wl,[Cl,oa.value?(E(),o("img",{key:0,class:"controlItem",src:S,style:{margin:"0 50px"},alt:"",onClick:ca})):c("",!0),oa.value?c("",!0):(E(),o("img",{key:1,class:"controlItem",src:z,style:{margin:"0 50px"},alt:"",onClick:ca})),Ll])])):(E(),o("div",Al,"请选择预览的音乐"))])]),g("div",Nl,[F("版权所有 © "+x(jl.value)+" ",1),g("a",{href:Sl.value||"#"},[g("a",{href:zl.value||"#"},x(Ml.value),9,_l),F(x(Vl.value),1)],8,Tl)])])]))}}),[["__scopeId","data-v-9bf59170"]]);export{Dl as default};
