import{_ as e}from"../Line 1/Line 1.30390b32.js";import{_ as a}from"../draw-fail/draw-fail.8f549170.js";import{_ as t,a as l}from"../police/police.b4a86fcd.js";import{d as s,_ as i,a as o,b as u,p as r,N as n,c as d}from"../popup/popup.cf559ca1.js";import{a as v}from"../music/music.aabbafa0.js";import{d as p,e as c,aJ as g,y as m,b as f,g as y,c as h,u as x,V as b,aF as k,I as w,aE as F,G as I,a4 as L,i as T,l as j,h as D,n as _,k as A,j as C,F as B,r as E,M as N,Z as S,m as M,o as R,aK as z,aL as J,C as P,D as H,aM as U,aN as O,H as G}from"../main-9f041486.js";import{S as V}from"../index/index.a184fda1.js";import{u as W}from"../index/index.e2d886a7.js";import"../createInspiration.vue_vue_type_script_setup_true_lang/createInspiration.vue_vue_type_script_setup_true_lang.3b396714.js";const K=e=>(P("data-v-0c12596d"),e=e(),H(),e),q={key:1},Z={key:2},Q={key:3,class:"text-image-container flex flex-row dark:bg-[#010102] bg-[#F4F4F4]",style:{width:"100%"}},X={style:{width:"100%"}},Y={class:"h-full flex justify-start items-between",style:{height:"100vh",width:"100%"}},$={class:"contentBox dark:bg-[#15171A] bg-[#FFFFFF]"},ee={style:{position:"absolute","z-index":"99",width:"278px","padding-bottom":"10px",top:"0"},class:"bg-[#fff] dark:bg-[#15171A]"},ae={style:{display:"flex","margin-top":"12px"}},te=["onClick"],le=K((()=>C("div",{class:"MJBox dark:bg-[#202B3A] bg-[#fff]"},[C("div",{class:"intro dark:text-[#CAC5C5] text-[#808080]"}," 一款强大的人工智能绘画工具，为用户提供了各种创意的绘画功能，一次性生成4张高质量的艺术创作。 ")],-1))),se={class:"padMapBox"},ie=K((()=>C("div",{style:{display:"flex","justify-content":"space-between"}},[C("div",{style:{display:"flex"}},[C("div",{style:{"font-size":"15px","font-weight":"500"}},"上传图片")])],-1))),oe={class:"modePutExpand"},ue={class:"upLoadContent"},re=K((()=>C("div",{class:"promptBox dark:bg-[#202B3A] bg-[#F5F8FE] text-[#3378ED] dark:text-[#2960BE]"}," 温馨提示：同官方的/blend命令图混图，最多可以上传5张图片进行混图，图片越靠前，权重越高。 ",-1))),ne={class:"radioBox dark:bg-[#15171A] bg-[#FFFFFF]"},de={style:{display:"flex"}},ve=[K((()=>C("img",{src:e,alt:""},null,-1)))],pe=K((()=>C("p",{style:{"margin-left":"4px","font-size":"10px"}},"快图模式",-1))),ce=[K((()=>C("img",{src:e,alt:""},null,-1)))],ge=K((()=>C("p",{style:{"margin-left":"4px","font-size":"10px"}},"常规模式",-1))),me=[K((()=>C("img",{style:{width:"12px",height:"12px","margin-right":"4px"},src:a,alt:""},null,-1))),K((()=>C("p",{style:{"font-size":"10px"},class:"text-[#A3A5A6] dark:text-[#76777A]"},"免责声明",-1)))],fe={class:"contentCenter bg-[#fff] dark:bg-[#15171A]"},ye=K((()=>C("div",{class:"contentCenterTop border-b-[2px] bg-[#fff] dark:bg-[#15171A] border-b-[2px] dark:border-[#000000] border-[#D1D1D1]"},[C("span",null,"#  创作中心"),C("span",{style:{color:"#EDB830"}},"    请遵守中华人民共和国网络安全法，严禁生成涉及政治人物、色情、恐怖等不良内容，如有违规封号处理")],-1))),he={key:0,class:"w-full",style:{padding:"0 0px",position:"relative","margin-top":"10px"}},xe={key:0,style:{height:"64vh",display:"flex","justify-content":"center","align-items":"center"}},be=[K((()=>C("div",{style:{width:"50px",height:"50px"}},[C("div",{class:"loader"})],-1)))],ke={style:{"margin-top":"10px"}},we={style:{color:"#eeeeee"},class:"end"},Fe={style:{display:"flex"}},Ie={key:0,style:{display:"flex"}},Le=K((()=>C("img",{style:{"margin-right":"5px",width:"16px",height:"16px"},src:t,alt:""},null,-1))),Te=["href"],je={key:1,style:{display:"flex"}},De=K((()=>C("img",{style:{"margin-right":"5px",width:"16px",height:"16px"},src:l,alt:""},null,-1))),_e=["href"],Ae=G(p({__name:"image2text",setup(e){const a=W();c();const t=g(),l=m(0);setTimeout((()=>{l.value=1}),0),f();const p=f(),{isMobile:P}=y(),H=f(),G=h((()=>H.isLogin));h((()=>H.userInfo.avatar)),h((()=>H.userInfo.username)),h((()=>H.userBalance));const K=h((()=>H.mjDrawForm)),Ae=x(),Ce=m(),Be=m([]),Ee=m(),Ne=m(0);b(G,((e,a)=>{console.log("登陆状态变化了",e),e&&k({page:1,size:20}).then((e=>{let a=e.data.rows;Be.value=a.reverse(),localStorage.setItem("drawLogList",JSON.stringify(a)),Ne.value=1,setTimeout((()=>{Ve()}),100)}))})),k({page:1,size:20}).then((e=>{let a=e.data.rows;Be.value=a.reverse(),localStorage.setItem("drawLogList",JSON.stringify(a)),Ne.value=1,setTimeout((()=>{Ve()}),100)}));const Se=w({files:[],previewImages:[]}),Me=["jpg","jpeg","png"],Re=e=>{"pending"===e.file.status&&Se.files.push(e.file.file),"removed"===e.file.status&&(Se.files=Se.files.filter((a=>a!==e.file.file))),I.emit("imageForm",Se)},ze=e=>{const a=e.file.type.split("/")[1];return e.fileList.length>=1?(Ae.warning("最多只能上传1张图片"),!1):Me.includes(a)&&e.fileList.length<=1},Je=e=>{const a=e.file.name;K.value.extendParam=K.value.extendParam.filter((e=>!e.filename.includes(a))),Pe()},Pe=async()=>{H.updateMjDrawForm(K.value)},He=e=>{Ee.value=e},Ue=async e=>{if(!e)return;const t=await U({jobIds:e});Xe.value=t.data;let l=t.data.filter((e=>e.status>=3)),s=t.data.filter((e=>6==e.status));if(l.length,0!=s.length){let e=s[0];return 9==e.action?a.openRegionModal(!0,{customId:e.customId,taskId:e.id,mode:e.mode}):H.updateRemixModal(!0,{prompt:"",taskId:e.id,customId:e.customId}),void(Ye.value&&clearTimeout(Ye.value))}if(l.length==t.data.length)return Ye.value&&clearTimeout(Ye.value),void setTimeout((()=>Ge()),100);$e()},Oe=m(null),Ge=()=>{let e=Oe.value;e.scrollTo({top:e.scrollHeight+e.clientHeight,behavior:"smooth"})},Ve=()=>{let e=Oe.value;e.scrollTop=e.scrollHeight},We=m(),Ke=m([]),qe=async e=>{Ke.value=[...Ke.value,e],1==Ke.value.length?We.value=Ke.value[0]:Ke.value.length>1&&(We.value=Ke.value.join(",")),await Ue(We.value),setTimeout((()=>Ge()),100)},Ze=m([]),Qe=async e=>{Ze.value=[...Ze.value,e],1==Ze.value.length?Ce.value=Ze.value[0]:Ze.value.length>1&&(Ce.value=Ze.value.join(",")),await Ue(Ce.value),setTimeout((()=>Ge()),100)},Xe=m({status:0}),Ye=m(),$e=()=>{Ye.value&&clearTimeout(Ye.value),Ye.value=setTimeout((()=>{var e,a,t;if((null==(e=Xe.value)?void 0:e.status)===O.DRAWED||(null==(a=Xe.value)?void 0:a.status)===O.DRAWFAIL||(null==(t=Xe.value)?void 0:t.status)===O.DRAWTIMEOUT)return Ye.value&&clearTimeout(Ye.value),Ee.value=0,I.emit("status",Ee.value),Be.value.push(Xe.value),I.emit("newDrawLogList",Be.value),We.value="",Ce.value="",void k({page:1,size:20}).then((e=>{let a=e.data.rows;Be.value=a.reverse(),localStorage.setItem("drawLogList",JSON.stringify(e.data.rows)),setTimeout((()=>Ge()),100)}));Ce.value?($e(),Ue(Ce.value)):We.value&&($e(),Ue(We.value))}),3e3)};F((()=>{Ye.value&&clearTimeout(Ye.value),Ye.value=null,p.updateDrawId({id:""})})),m(0),I.on("upLoadIsShow",(e=>{l.value=e})),I.on("upLoadShow",(e=>{l.value=e}));const ea=m(!1);I.on("error",(e=>{ea.value=e}));const aa=()=>{ea.value=!1},ta=()=>{ea.value=!1,H.checkAuth()&&t.updateVipDialog(!0)},la=m(!1);I.emit("drawRoute",L.options.history.location);const sa=m("");sa.value=L.currentRoute.value.fullPath;const ia=m(""),oa=m(""),ua=m(""),ra=m(""),na=m("");v({keys:["copyrightTitle","icpNumber","policeFilingNumber","icpUrl","policeFilingUrl"]}).then((e=>{ia.value=e.data.copyrightTitle,oa.value=e.data.icpNumber,ua.value=e.data.policeFilingNumber,ra.value=e.data.icpUrl,na.value=e.data.policeFilingUrl})),m(!1),m(!1);const da=m(0),va=m(1);function pa(e){da.value=e,0==e?va.value=1:1==e&&(va.value=2),I.emit("imgToTextMode",va.value)}function ca(){L.push("/serviceAgreement")}return(e,a)=>(R(),T(B,null,[la.value?(R(),T("div",{key:0,class:"mask",onClick:a[0]||(a[0]=e=>la.value=!1)})):j("",!0),D(P)?(R(),T("div",q,[_(u)])):j("",!0),ea.value?(R(),T("div",Z,[_(r,{onClosePop:aa,onBuyVip:ta})])):j("",!0),D(P)?j("",!0):(R(),T("div",Q,[D(P)?j("",!0):(R(),A(V,{key:0})),C("div",X,[C("div",Y,[C("div",$,[C("div",ee,[C("div",ae,[(R(!0),T(B,null,E(D(z),(e=>(R(),T("div",{class:N(sa.value==e.menuPath?"activeSelectItem text-[#fff]":"selectItem text-[#808080] bg-[#F4F4F4;] dark:bg-[#010102] dark:text-[#fff]"),key:e.key,onClick:a=>function(e){L.replace({path:e.menuPath}),("图生图"==e.menuName||"图生文"==e.menuName)&&I.emit("upLoadShow",1)}(e)},M(e.menuName),11,te)))),128))]),le]),C("div",se,[ie,C("div",oe,[C("div",ue,[C("div",null,[_(D(J),{accept:".jpg,.jpeg,.png",action:"","default-upload":!1,"on-change":Re,"on-before-upload":ze,"on-remove":Je,"list-type":"image-card","directory-dnd":""})])])])]),re,C("div",ne,[C("div",de,[C("div",{class:"radioItem",onClick:a[1]||(a[1]=e=>pa(0))},[C("div",{class:N(["radioItemImgBox",0==da.value?"dark:bg-[#2960BE] bg-[#3378ED]":"dark:bg-[#484A4D] bg-[#CECFD0]"])},ve,2),pe]),C("div",{class:"radioItem",style:{"margin-left":"12px"},onClick:a[2]||(a[2]=e=>pa(1))},[C("div",{class:N(["radioItemImgBox",1==da.value?"dark:bg-[#2960BE] bg-[#3378ED]":"dark:bg-[#484A4D] bg-[#CECFD0]"])},ce,2),ge])]),C("div",{style:{display:"flex","align-items":"center",cursor:"pointer"},onClick:ca},me)]),_(n,{sendType:1,onGetjobId:Qe,onResquestStatus:He})]),C("div",fe,[ye,0!=Be.value.length||Ce.value?(R(),T("div",{key:1,class:"drawList",ref_key:"toTop",ref:Oe},[C("div",ke,[_(s,{drawLogList:Be.value,onNewJobId:qe},null,8,["drawLogList"])]),Ce.value?(R(),A(i,{key:0,task:Xe.value,onRefresh:Qe},null,8,["task"])):j("",!0),We.value?(R(),A(o,{key:1,task:Xe.value,onNewJob:qe},null,8,["task"])):j("",!0)],512)):(R(),T("div",he,[0==Ne.value&&G.value?(R(),T("div",xe,be)):j("",!0),0==Ne.value&&G.value?j("",!0):(R(),A(d,{key:1}))])),C("div",we,[C("div",Fe,[S("版权所有 © "+M(ia.value)+" ",1),oa.value?(R(),T("div",Ie,[Le,C("a",{href:ra.value||"#"},M(oa.value),9,Te)])):j("",!0),ua.value?(R(),T("div",je,[De,C("a",{href:na.value||"#"},M(ua.value),9,_e)])):j("",!0)])])])])])]))],64))}}),[["__scopeId","data-v-0c12596d"]]);export{Ae as default};
